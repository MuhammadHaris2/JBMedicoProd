import{$ as x,$a as ca,A as Wh,Aa as od,B as Yo,Ba as sa,C as _n,Ca as q,D as yn,Da as ad,E as or,Ea as cd,F as Jo,Fa as ld,G as vn,Ga as ud,H as Gh,Ha as hd,I as Vi,Ia as dd,J as mt,Ja as fd,K as Xo,Ka as ne,L as Hh,La as _e,M as Kh,Ma as ye,N as Qh,Na as qi,O as $e,Oa as pd,P as Yh,Pa as gd,Q as G,Qa as ji,R as z,Ra as In,S as ar,Sa as md,T as Zo,Ta as zi,U as cr,Ua as _d,V as Fi,Va as Wi,W as qe,Wa as yd,X as Jh,Xa as vd,Y as wn,Ya as oa,Z as lr,Za as aa,_ as Xh,_a as wd,a as y,aa as je,ab as Id,b as te,ba as Zh,bb as Ed,ca as W,cb as Ae,d as gt,da as ea,db as Gi,e as f,ea as ed,eb as Td,f as Uh,fa as Ft,fb as Sd,g as Bh,ga as td,gb as la,h as jo,ha as ta,hb as Cd,i as zo,ia as F,j as Wo,ja as E,k as Lt,ka as H,l as Se,la as ur,m as $h,ma as hr,n as qh,na as nd,o as Vt,oa as Ui,p as Go,pa as Ut,q as Ho,qa as rd,r as Ko,ra as na,s as Oe,sa as ze,t as I,ta as ra,u as sr,ua as id,v as jh,va as dr,w as zh,wa as Bi,x as M,xa as ia,y as Qo,ya as sd,z as Ce,za as $i}from"./chunk-SL7WKGKB.js";var da=class extends Ed{constructor(){super(...arguments),this.supportsDOMEvents=!0}},fa=class t extends da{static makeCurrent(){Id(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ny();return n==null?null:ry(n)}resetBaseElement(){fr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Td(document.cookie,e)}},fr=null;function ny(){return fr=fr||document.querySelector("base"),fr?fr.getAttribute("href"):null}function ry(t){return new URL(t,document.baseURI).pathname}var iy=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),pa=new W(""),bd=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new z(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(F(pa),F(q))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),Hi=class{constructor(e){this._doc=e}},ua="ng-app-id",Pd=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=la(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${ua}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(ua),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(ua,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(F(Ae),F(ea),F(ta,8),F(Ft))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ma=/%COMP%/g,Nd="%COMP%",sy=`_nghost-${Nd}`,oy=`_ngcontent-${Nd}`,ay=!0,cy=new W("",{providedIn:"root",factory:()=>ay});function ly(t){return oy.replace(ma,t)}function uy(t){return sy.replace(ma,t)}function Dd(t,e){return e.map(n=>n.replace(ma,t))}var Ki=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=la(c),this.defaultRenderer=new pr(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===cr.ShadowDom&&(i=te(y({},i),{encapsulation:cr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Qi?s.applyToHost(r):s instanceof gr&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case cr.Emulated:o=new Qi(l,u,i,this.appId,h,a,c,d);break;case cr.ShadowDom:return new ga(l,u,r,i,a,c,this.nonce,d);default:o=new gr(l,u,i,h,a,c,d);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(F(bd),F(Pd),F(ea),F(cy),F(Ae),F(Ft),F(q),F(ta))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),pr=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ha[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ad(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ad(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=ha[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ha[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(dr.DashCase|dr.Important)?e.style.setProperty(n,r,i&dr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&dr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ca().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Ad(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ga=class extends pr{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Dd(i.id,i.styles);for(let u of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gr=class extends pr{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Dd(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qi=class extends gr{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=ly(l),this.hostAttr=uy(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},hy=(()=>{let e=class e extends Hi{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(F(Ae))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),Rd=["alt","control","meta","shift"],dy={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fy={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},py=(()=>{let e=class e extends Hi{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ca().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Rd.forEach(u=>{let h=i.indexOf(u);h>-1&&(i.splice(h,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=dy[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Rd.forEach(a=>{if(a!==s){let c=fy[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(F(Ae))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})();function kd(t,e){return wd(y({rootComponent:t},gy(e)))}function gy(t){return{appProviders:[...wy,...t?.providers??[]],platformProviders:vy}}function my(){fa.makeCurrent()}function _y(){return new ra}function yy(){return Xh(document),document}var vy=[{provide:Ft,useValue:Sd},{provide:ed,useValue:my,multi:!0},{provide:Ae,useFactory:yy,deps:[]}];var wy=[{provide:nd,useValue:"root"},{provide:ra,useFactory:_y,deps:[]},{provide:pa,useClass:hy,multi:!0,deps:[Ae,q,Ft]},{provide:pa,useClass:py,multi:!0,deps:[Ae]},Ki,Pd,bd,{provide:$i,useExisting:Ki},{provide:Cd,useClass:iy,deps:[]},[]];var Od=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(F(Ae))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var T="primary",Nr=Symbol("RouteTitle"),Ia=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function An(t){return new Ia(t)}function Ey(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ty(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!We(t[n],e[n]))return!1;return!0}function We(t,e){let n=t?Ea(t):void 0,r=e?Ea(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ud(t[i],e[i]))return!1;return!0}function Ea(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ud(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Bd(t){return t.length>0?t[t.length-1]:null}function wt(t){return jh(t)?t:yd(t)?Oe(Promise.resolve(t)):I(t)}var Sy={exact:qd,subset:jd},$d={exact:Cy,subset:Ay,ignored:()=>!0};function xd(t,e,n){return Sy[n.paths](t.root,e.root,n.matrixParams)&&$d[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Cy(t,e){return We(t,e)}function qd(t,e,n){if(!$t(t.segments,e.segments)||!Xi(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!qd(t.children[r],e.children[r],n))return!1;return!0}function Ay(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ud(t[n],e[n]))}function jd(t,e,n){return zd(t,e,e.segments,n)}function zd(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!$t(i,n)||e.hasChildren()||!Xi(i,n,r))}else if(t.segments.length===n.length){if(!$t(t.segments,n)||!Xi(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!jd(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!$t(t.segments,i)||!Xi(t.segments,i,r)||!t.children[T]?!1:zd(t.children[T],e,s,r)}}function Xi(t,e,n){return e.every((r,i)=>$d[n](t[i].parameters,r.parameters))}var yt=class{constructor(e=new P([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=An(this.queryParams),this._queryParamMap}toString(){return Py.serialize(this)}},P=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zi(this)}},Bt=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=An(this.parameters),this._parameterMap}toString(){return Gd(this)}};function Ry(t,e){return $t(t,e)&&t.every((n,r)=>We(n.parameters,e[r].parameters))}function $t(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function by(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===T&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==T&&(n=n.concat(e(i,r)))}),n}var Ka=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>new ts,providedIn:"root"});let t=e;return t})(),ts=class{parse(e){let n=new Sa(e);return new yt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${mr(e.root,!0)}`,r=ky(e.queryParams),i=typeof e.fragment=="string"?`#${Ny(e.fragment)}`:"";return`${n}${r}${i}`}},Py=new ts;function Zi(t){return t.segments.map(e=>Gd(e)).join("/")}function mr(t,e){if(!t.hasChildren())return Zi(t);if(e){let n=t.children[T]?mr(t.children[T],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==T&&r.push(`${i}:${mr(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=by(t,(r,i)=>i===T?[mr(t.children[T],!1)]:[`${i}:${mr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[T]!=null?`${Zi(t)}/${n[0]}`:`${Zi(t)}/(${n.join("//")})`}}function Wd(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yi(t){return Wd(t).replace(/%3B/gi,";")}function Ny(t){return encodeURI(t)}function Ta(t){return Wd(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function es(t){return decodeURIComponent(t)}function Md(t){return es(t.replace(/\+/g,"%20"))}function Gd(t){return`${Ta(t.path)}${Dy(t.parameters)}`}function Dy(t){return Object.entries(t).map(([e,n])=>`;${Ta(e)}=${Ta(n)}`).join("")}function ky(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Yi(n)}=${Yi(i)}`).join("&"):`${Yi(n)}=${Yi(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Oy=/^[^\/()?;#]+/;function _a(t){let e=t.match(Oy);return e?e[0]:""}var xy=/^[^\/()?;=#]+/;function My(t){let e=t.match(xy);return e?e[0]:""}var Ly=/^[^=?&#]+/;function Vy(t){let e=t.match(Ly);return e?e[0]:""}var Fy=/^[^&#]+/;function Uy(t){let e=t.match(Fy);return e?e[0]:""}var Sa=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new P([],{}):new P([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[T]=new P(e,n)),r}parseSegment(){let e=_a(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Bt(es(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=My(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_a(this.remaining);i&&(r=i,this.capture(r))}e[es(n)]=es(r)}parseQueryParam(e){let n=Vy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Uy(this.remaining);o&&(r=o,this.capture(r))}let i=Md(n),s=Md(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_a(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=T);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[T]:new P([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function Hd(t){return t.segments.length>0?new P([],{[T]:t}):t}function Kd(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Kd(i);if(r===T&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new P(t.segments,e);return By(n)}function By(t){if(t.numberOfChildren===1&&t.children[T]){let e=t.children[T];return new P(t.segments.concat(e.segments),e.children)}return t}function Rn(t){return t instanceof yt}function $y(t,e,n=null,r=null){let i=Qd(t);return Yd(i,e,n,r)}function Qd(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new P(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Hd(r);return e??i}function Yd(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ya(i,i,i,n,r);let s=qy(e);if(s.toRoot())return ya(i,i,new P([],{}),n,r);let o=jy(s,i,t),a=o.processChildren?vr(o.segmentGroup,o.index,s.commands):Xd(o.segmentGroup,o.index,s.commands);return ya(i,o.segmentGroup,a,n,r)}function ns(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Er(t){return typeof t=="object"&&t!=null&&t.outlets}function ya(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=Jd(t,e,n);let a=Hd(Kd(o));return new yt(a,s,i)}function Jd(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Jd(s,e,n)}),new P(t.segments,r)}var rs=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ns(r[0]))throw new z(4003,!1);let i=r.find(Er);if(i&&i!==Bd(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qy(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new rs(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new rs(n,e,r)}var Sn=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function jy(t,e,n){if(t.isAbsolute)return new Sn(e,!0,0);if(!n)return new Sn(e,!1,NaN);if(n.parent===null)return new Sn(n,!0,0);let r=ns(t.commands[0])?0:1,i=n.segments.length-1+r;return zy(n,i,t.numberOfDoubleDots)}function zy(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new Sn(r,!1,i-s)}function Wy(t){return Er(t[0])?t[0].outlets:{[T]:t}}function Xd(t,e,n){if(t??=new P([],{}),t.segments.length===0&&t.hasChildren())return vr(t,e,n);let r=Gy(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new P(t.segments.slice(0,r.pathIndex),{});return s.children[T]=new P(t.segments.slice(r.pathIndex),t.children),vr(s,0,i)}else return r.match&&i.length===0?new P(t.segments,{}):r.match&&!t.hasChildren()?Ca(t,e,n):r.match?vr(t,0,i):Ca(t,e,n)}function vr(t,e,n){if(n.length===0)return new P(t.segments,{});{let r=Wy(n),i={};if(Object.keys(r).some(s=>s!==T)&&t.children[T]&&t.numberOfChildren===1&&t.children[T].segments.length===0){let s=vr(t.children[T],e,n);return new P(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Xd(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new P(t.segments,i)}}function Gy(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Er(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Vd(c,l,o))return s;r+=2}else{if(!Vd(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ca(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Er(s)){let c=Hy(s.outlets);return new P(r,c)}if(i===0&&ns(n[0])){let c=t.segments[e];r.push(new Bt(c.path,Ld(n[0]))),i++;continue}let o=Er(s)?s.outlets[T]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ns(a)?(r.push(new Bt(o,Ld(a))),i+=2):(r.push(new Bt(o,{})),i++)}return new P(r,{})}function Hy(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ca(new P([],{}),0,r))}),e}function Ld(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Vd(t,e,n){return t==n.path&&We(e,n.parameters)}var wr="imperative",re=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(re||{}),be=class{constructor(e,n){this.id=e,this.url=n}},Tr=class extends be{constructor(e,n,r="imperative",i=null){super(e,n),this.type=re.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qt=class extends be{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=re.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Re=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Re||{}),Aa=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Aa||{}),vt=class extends be{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=re.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jt=class extends be{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=re.NavigationSkipped}},Sr=class extends be{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=re.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},is=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=re.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ra=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=re.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ba=class extends be{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=re.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pa=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=re.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Na=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=re.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Da=class{constructor(e){this.route=e,this.type=re.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ka=class{constructor(e){this.route=e,this.type=re.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Oa=class{constructor(e){this.snapshot=e,this.type=re.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xa=class{constructor(e){this.snapshot=e,this.type=re.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ma=class{constructor(e){this.snapshot=e,this.type=re.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},La=class{constructor(e){this.snapshot=e,this.type=re.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Cr=class{},Ar=class{constructor(e){this.url=e}};var Va=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new us,this.attachRef=null}},us=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Va,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ss=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Fa(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Fa(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ua(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ua(e,this._root).map(n=>n.value)}};function Fa(t,e){if(t===e.value)return e;for(let n of e.children){let r=Fa(t,n);if(r)return r}return null}function Ua(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ua(t,n);if(r.length)return r.unshift(e),r}return[]}var ve=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Tn(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var os=class extends ss{constructor(e,n){super(e),this.snapshot=n,Ya(this,e)}toString(){return this.snapshot.toString()}};function Zd(t){let e=Ky(t),n=new Se([new Bt("",{})]),r=new Se({}),i=new Se({}),s=new Se({}),o=new Se(""),a=new bn(n,r,s,o,i,T,t,e.root);return a.snapshot=e.root,new os(new ve(a,[]),e)}function Ky(t){let e={},n={},r={},i="",s=new Rr([],e,r,i,n,T,t,null,{});return new as("",new ve(s,[]))}var bn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(M(l=>l[Nr]))??I(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(M(e=>An(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(M(e=>An(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qa(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&tf(i)&&(r.resolve[Nr]=i.title),r}var Rr=class{get title(){return this.data?.[Nr]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=An(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=An(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},as=class extends ss{constructor(e,n){super(n),this.url=e,Ya(this,n)}toString(){return ef(this._root)}};function Ya(t,e){e.value._routerState=t,e.children.forEach(n=>Ya(t,n))}function ef(t){let e=t.children.length>0?` { ${t.children.map(ef).join(", ")} } `:"";return`${t.value}${e}`}function va(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,We(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),We(e.params,n.params)||t.paramsSubject.next(n.params),Ty(e.url,n.url)||t.urlSubject.next(n.url),We(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ba(t,e){let n=We(t.params,e.params)&&Ry(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ba(t.parent,e.parent))}function tf(t){return typeof t.title=="string"||t.title===null}var Ja=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=T,this.activateEvents=new ar,this.deactivateEvents=new ar,this.attachEvents=new ar,this.detachEvents=new ar,this.parentContexts=E(us),this.location=E(ad),this.changeDetector=E(sa),this.environmentInjector=E(Ui),this.inputBinder=E(Xa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new $a(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Jh({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[rd]});let t=e;return t})(),$a=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===bn?this.route:e===us?this.childContexts:this.parent.get(e,n)}},Xa=new W("");function Qy(t,e,n){let r=br(t,e._root,n?n._root:void 0);return new os(r,e)}function br(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Yy(t,e,n);return new ve(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>br(t,a)),o}}let r=Jy(e.value),i=e.children.map(s=>br(t,s));return new ve(r,i)}}function Yy(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return br(t,r,i);return br(t,r)})}function Jy(t){return new bn(new Se(t.url),new Se(t.params),new Se(t.queryParams),new Se(t.fragment),new Se(t.data),t.outlet,t.component,t)}var nf="ngNavigationCancelingError";function rf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Rn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sf(!1,Re.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function sf(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[nf]=!0,n.cancellationCode=e,n}function Xy(t){return of(t)&&Rn(t.url)}function of(t){return!!t&&t[nf]}var Zy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fi({type:e,selectors:[["ng-component"]],standalone:!0,features:[ji],decls:1,vars:0,template:function(i,s){i&1&&ye(0,"router-outlet")},dependencies:[Ja],encapsulation:2});let t=e;return t})();function ev(t,e){return t.providers&&!t._injector&&(t._injector=ld(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Za(t){let e=t.children&&t.children.map(Za),n=e?te(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==T&&(n.component=Zy),n}function Ge(t){return t.outlet||T}function tv(t,e){let n=t.filter(r=>Ge(r)===e);return n.push(...t.filter(r=>Ge(r)!==e)),n}function Dr(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var nv=(t,e,n,r)=>M(i=>(new qa(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),qa=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),va(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Tn(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Tn(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new La(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xa(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(va(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),va(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Dr(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},cs=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Cn=class{constructor(e,n){this.component=e,this.route=n}};function rv(t,e,n){let r=t._root,i=e?e._root:null;return _r(r,i,n,[r.value])}function iv(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Nn(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Zh(t)?t:e.get(t):r}function _r(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Tn(e);return t.children.forEach(o=>{sv(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ir(a,n.getContext(o),i)),i}function sv(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=ov(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new cs(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_r(t,e,a?a.children:null,r,i):_r(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Cn(a.outlet.component,o))}else o&&Ir(e,a,i),i.canActivateChecks.push(new cs(r)),s.component?_r(t,null,a?a.children:null,r,i):_r(t,null,n,r,i);return i}function ov(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!$t(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$t(t.url,e.url)||!We(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ba(t,e)||!We(t.queryParams,e.queryParams);case"paramsChange":default:return!Ba(t,e)}}function Ir(t,e,n){let r=Tn(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ir(o,e.children.getContext(s),n):Ir(o,null,n):Ir(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Cn(e.outlet.component,i)):n.canDeactivateChecks.push(new Cn(null,i)):n.canDeactivateChecks.push(new Cn(null,i))}function kr(t){return typeof t=="function"}function av(t){return typeof t=="boolean"}function cv(t){return t&&kr(t.canLoad)}function lv(t){return t&&kr(t.canActivate)}function uv(t){return t&&kr(t.canActivateChild)}function hv(t){return t&&kr(t.canDeactivate)}function dv(t){return t&&kr(t.canMatch)}function af(t){return t instanceof zh||t?.name==="EmptyError"}var Ji=Symbol("INITIAL_VALUE");function Pn(){return $e(t=>Qo(t.map(e=>e.pipe(vn(1),Qh(Ji)))).pipe(M(e=>{for(let n of e)if(n!==!0){if(n===Ji)return Ji;if(n===!1||n instanceof yt)return n}return!0}),_n(e=>e!==Ji),vn(1)))}function fv(t,e){return Ce(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?I(te(y({},n),{guardsResult:!0})):pv(o,r,i,t).pipe(Ce(a=>a&&av(a)?gv(r,s,t,e):I(a)),M(a=>te(y({},n),{guardsResult:a})))})}function pv(t,e,n,r){return Oe(t).pipe(Ce(i=>wv(i.component,i.route,n,e,r)),mt(i=>i!==!0,!0))}function gv(t,e,n,r){return Oe(e).pipe(or(i=>Wh(_v(i.route.parent,r),mv(i.route,r),vv(t,i.path,n),yv(t,i.route,n))),mt(i=>i!==!0,!0))}function mv(t,e){return t!==null&&e&&e(new Ma(t)),I(!0)}function _v(t,e){return t!==null&&e&&e(new Oa(t)),I(!0)}function yv(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return I(!0);let i=r.map(s=>Yo(()=>{let o=Dr(e)??n,a=Nn(s,o),c=lv(a)?a.canActivate(e,t):Ut(o,()=>a(e,t));return wt(c).pipe(mt())}));return I(i).pipe(Pn())}function vv(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>iv(o)).filter(o=>o!==null).map(o=>Yo(()=>{let a=o.guards.map(c=>{let l=Dr(o.node)??n,u=Nn(c,l),h=uv(u)?u.canActivateChild(r,t):Ut(l,()=>u(r,t));return wt(h).pipe(mt())});return I(a).pipe(Pn())}));return I(s).pipe(Pn())}function wv(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return I(!0);let o=s.map(a=>{let c=Dr(e)??i,l=Nn(a,c),u=hv(l)?l.canDeactivate(t,e,n,r):Ut(c,()=>l(t,e,n,r));return wt(u).pipe(mt())});return I(o).pipe(Pn())}function Iv(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return I(!0);let s=i.map(o=>{let a=Nn(o,t),c=cv(a)?a.canLoad(e,n):Ut(t,()=>a(e,n));return wt(c)});return I(s).pipe(Pn(),cf(r))}function cf(t){return Bh(G(e=>{if(Rn(e))throw rf(t,e)}),M(e=>e===!0))}function Ev(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return I(!0);let s=i.map(o=>{let a=Nn(o,t),c=dv(a)?a.canMatch(e,n):Ut(t,()=>a(e,n));return wt(c)});return I(s).pipe(Pn(),cf(r))}var Pr=class{constructor(e){this.segmentGroup=e||null}},ls=class extends Error{constructor(e){super(),this.urlTree=e}};function En(t){return sr(new Pr(t))}function Tv(t){return sr(new z(4e3,!1))}function Sv(t){return sr(sf(!1,Re.GuardRejected))}var ja=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return I(r);if(i.numberOfChildren>1||!i.children[T])return Tv(e.redirectTo);i=i.children[T]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ls(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new yt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new P(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},za={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cv(t,e,n,r,i){let s=ec(t,e,n);return s.matched?(r=ev(e,r),Ev(r,e,n,i).pipe(M(o=>o===!0?s:y({},za)))):I(s)}function ec(t,e,n){if(e.path==="**")return Av(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},za):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ey)(n,t,e);if(!i)return y({},za);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?y(y({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Av(t){return{matched:!0,parameters:t.length>0?Bd(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Fd(t,e,n,r){return n.length>0&&Pv(t,n,r)?{segmentGroup:new P(e,bv(r,new P(n,t.children))),slicedSegments:[]}:n.length===0&&Nv(t,n,r)?{segmentGroup:new P(t.segments,Rv(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new P(t.segments,t.children),slicedSegments:n}}function Rv(t,e,n,r){let i={};for(let s of n)if(hs(t,e,s)&&!r[Ge(s)]){let o=new P([],{});i[Ge(s)]=o}return y(y({},r),i)}function bv(t,e){let n={};n[T]=e;for(let r of t)if(r.path===""&&Ge(r)!==T){let i=new P([],{});n[Ge(r)]=i}return n}function Pv(t,e,n){return n.some(r=>hs(t,e,r)&&Ge(r)!==T)}function Nv(t,e,n){return n.some(r=>hs(t,e,r))}function hs(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Dv(t,e,n,r){return Ge(t)!==r&&(r===T||!hs(e,n,t))?!1:ec(e,t,n).matched}function kv(t,e,n){return e.length===0&&!t.children[n]}var Wa=class{};function Ov(t,e,n,r,i,s,o="emptyOnly"){return new Ga(t,e,n,r,i,o,s).recognize()}var xv=31,Ga=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ja(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=Fd(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(M(n=>{let r=new Rr([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,{},T,this.rootComponentType,null,{}),i=new ve(r,n),s=new as("",i),o=$y(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,T).pipe(yn(r=>{if(r instanceof ls)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pr?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Qa(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(M(s=>s instanceof ve?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Oe(i).pipe(or(s=>{let o=r.children[s],a=tv(n,s);return this.processSegmentGroup(e,a,o,s)}),Kh((s,o)=>(s.push(...o),s)),Jo(null),Hh(),Ce(s=>{if(s===null)return En(r);let o=lf(s);return Mv(o),I(o)}))}processSegment(e,n,r,i,s,o){return Oe(n).pipe(or(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(yn(c=>{if(c instanceof Pr)return I(null);throw c}))),mt(a=>!!a),yn(a=>{if(af(a))return kv(r,i,s)?I(new Wa):En(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return Dv(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):En(i):En(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=ec(n,i,s);if(!a)return En(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xv&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,h).pipe(Ce(d=>this.processSegment(e,r,n,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=Cv(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe($e(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:d}=a,m=new Rr(u,d,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Vv(r),Ge(r),r.component??r._loadedComponent??null,r,Fv(r)),{segmentGroup:_,slicedSegments:N}=Fd(n,u,h,c);if(N.length===0&&_.hasChildren())return this.processChildren(l,c,_).pipe(M(fe=>fe===null?null:new ve(m,fe)));if(c.length===0&&N.length===0)return I(new ve(m,[]));let j=Ge(r)===s;return this.processSegment(l,c,_,N,j?T:s,!0).pipe(M(fe=>new ve(m,fe instanceof ve?[fe]:[])))}))):En(n)))}getChildConfig(e,n,r){return n.children?I({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?I({routes:n._loadedRoutes,injector:n._loadedInjector}):Iv(e,n,r,this.urlSerializer).pipe(Ce(i=>i?this.configLoader.loadChildren(e,n).pipe(G(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Sv(n))):I({routes:[],injector:e})}};function Mv(t){t.sort((e,n)=>e.value.outlet===T?-1:n.value.outlet===T?1:e.value.outlet.localeCompare(n.value.outlet))}function Lv(t){let e=t.value.routeConfig;return e&&e.path===""}function lf(t){let e=[],n=new Set;for(let r of t){if(!Lv(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=lf(r.children);e.push(new ve(r.value,i))}return e.filter(r=>!n.has(r))}function Vv(t){return t.data||{}}function Fv(t){return t.resolve||{}}function Uv(t,e,n,r,i,s){return Ce(o=>Ov(t,e,n,r,o.extractedUrl,i,s).pipe(M(({state:a,tree:c})=>te(y({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Bv(t,e){return Ce(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return I(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of uf(c))o.add(l);let a=0;return Oe(o).pipe(or(c=>s.has(c)?$v(c,r,t,e):(c.data=Qa(c,c.parent,t).resolve,I(void 0))),G(()=>a++),Xo(1),Ce(c=>a===o.size?I(n):Vt))})}function uf(t){let e=t.children.map(n=>uf(n)).flat();return[t,...e]}function $v(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!tf(i)&&(s[Nr]=i.title),qv(s,t,e,r).pipe(M(o=>(t._resolvedData=o,t.data=Qa(t,t.parent,n).resolve,null)))}function qv(t,e,n,r){let i=Ea(t);if(i.length===0)return I({});let s={};return Oe(i).pipe(Ce(o=>jv(t[o],e,n,r).pipe(mt(),G(a=>{s[o]=a}))),Xo(1),Gh(s),yn(o=>af(o)?Vt:sr(o)))}function jv(t,e,n,r){let i=Dr(e)??r,s=Nn(t,i),o=s.resolve?s.resolve(e,n):Ut(i,()=>s(e,n));return wt(o)}function wa(t){return $e(e=>{let n=t(e);return n?Oe(n).pipe(M(()=>e)):I(e)})}var hf=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===T);return i}getResolvedTitleForRoute(r){return r.data[Nr]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>E(zv),providedIn:"root"});let t=e;return t})(),zv=(()=>{let e=class e extends hf{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(F(Od))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tc=new W("",{providedIn:"root",factory:()=>({})}),nc=new W(""),Wv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(aa)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return I(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=wt(r.loadComponent()).pipe(M(df),G(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Vi(()=>{this.componentLoaders.delete(r)})),s=new Wo(i,()=>new Lt).pipe(zo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return I({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Gv(i,this.compiler,r,this.onLoadEndListener).pipe(Vi(()=>{this.childrenLoaders.delete(i)})),a=new Wo(o,()=>new Lt).pipe(zo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gv(t,e,n,r){return wt(t.loadChildren()).pipe(M(df),Ce(i=>i instanceof cd||Array.isArray(i)?I(i):Oe(e.compileModuleAsync(i))),M(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(nc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Za),injector:s}}))}function Hv(t){return t&&typeof t=="object"&&"default"in t}function df(t){return Hv(t)?t.default:t}var rc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>E(Kv),providedIn:"root"});let t=e;return t})(),Kv=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qv=new W("");var Yv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Lt,this.transitionAbortSubject=new Lt,this.configLoader=E(Wv),this.environmentInjector=E(Ui),this.urlSerializer=E(Ka),this.rootContexts=E(us),this.location=E(Gi),this.inputBindingEnabled=E(Xa,{optional:!0})!==null,this.titleStrategy=E(hf),this.options=E(tc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(rc),this.createViewTransition=E(Qv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>I(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Da(s)),i=s=>this.events.next(new ka(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(te(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Se({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wr,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_n(o=>o.id!==0),M(o=>te(y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{this.currentTransition=o;let a=!1,c=!1;return I(o).pipe(G(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?te(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$e(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&h!=="reload"){let d="";return this.events.next(new jt(l.id,this.urlSerializer.serialize(l.rawUrl),d,Aa.IgnoredSameUrlNavigation)),l.resolve(null),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return I(l).pipe($e(d=>{let m=this.transitions?.getValue();return this.events.next(new Tr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions?.getValue()?Vt:Promise.resolve(d)}),Uv(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),G(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=te(y({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let m=new is(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:m,source:_,restoredState:N,extras:j}=l,fe=new Tr(d,this.urlSerializer.serialize(m),_,N);this.events.next(fe);let st=Zd(this.rootComponentType).snapshot;return this.currentTransition=o=te(y({},l),{targetSnapshot:st,urlAfterRedirects:m,extras:te(y({},j),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,I(o)}else{let d="";return this.events.next(new jt(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Aa.IgnoredByUrlHandlingStrategy)),l.resolve(null),Vt}}),G(l=>{let u=new Ra(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),M(l=>(this.currentTransition=o=te(y({},l),{guards:rv(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),fv(this.environmentInjector,l=>this.events.next(l)),G(l=>{if(o.guardsResult=l.guardsResult,Rn(l.guardsResult))throw rf(this.urlSerializer,l.guardsResult);let u=new ba(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),_n(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Re.GuardRejected),!1)),wa(l=>{if(l.guards.canActivateChecks.length)return I(l).pipe(G(u=>{let h=new Pa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),$e(u=>{let h=!1;return I(u).pipe(Bv(this.paramsInheritanceStrategy,this.environmentInjector),G({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",Re.NoDataFromResolver)}}))}),G(u=>{let h=new Na(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),wa(l=>{let u=h=>{let d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(G(m=>{h.component=m}),M(()=>{})));for(let m of h.children)d.push(...u(m));return d};return Qo(u(l.targetSnapshot.root)).pipe(Jo(null),vn(1))}),wa(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?Oe(h).pipe(M(()=>o)):I(o)}),M(l=>{let u=Qy(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=te(y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),G(()=>{this.events.next(new Cr)}),nv(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),vn(1),G({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Yh(this.transitionAbortSubject.pipe(G(l=>{throw l}))),Vi(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Re.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yn(l=>{if(c=!0,of(l))this.events.next(new vt(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Xy(l)?this.events.next(new Ar(l.url)):o.resolve(!1);else{this.events.next(new Sr(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Vt}))}))}cancelNavigationTransition(r,i,s){let o=new vt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jv(t){return t!==wr}var Xv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>E(Zv),providedIn:"root"});let t=e;return t})(),Ha=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Zv=(()=>{let e=class e extends Ha{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=na(e)))(s||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ff=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>E(ew),providedIn:"root"});let t=e;return t})(),ew=(()=>{let e=class e extends ff{constructor(){super(...arguments),this.location=E(Gi),this.urlSerializer=E(Ka),this.options=E(tc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(rc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zd(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Tr)this.stateMemento=this.createStateMemento();else if(r instanceof jt)this.rawUrlTree=i.initialUrl;else if(r instanceof is){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Cr?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof vt&&(r.code===Re.GuardRejected||r.code===Re.NoDataFromResolver)?this.restoreHistory(i):r instanceof Sr?this.restoreHistory(i,!0):r instanceof qt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=na(e)))(s||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yr=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(yr||{});function tw(t,e){t.events.pipe(_n(n=>n instanceof qt||n instanceof vt||n instanceof Sr||n instanceof jt),M(n=>n instanceof qt||n instanceof jt?yr.COMPLETE:(n instanceof vt?n.code===Re.Redirect||n.code===Re.SupersededByNewNavigation:!1)?yr.REDIRECTING:yr.FAILED),_n(n=>n!==yr.REDIRECTING),vn(1)).subscribe(()=>{e()})}function nw(t){throw t}var rw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pf=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=E(Wi),this.stateManager=E(ff),this.options=E(tc,{optional:!0})||{},this.pendingTasks=E(ud),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(Yv),this.urlSerializer=E(Ka),this.location=E(Gi),this.urlHandlingStrategy=E(rc),this._events=new Lt,this.errorHandler=this.options.errorHandler||nw,this.navigated=!1,this.routeReuseStrategy=E(Xv),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(nc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(Xa,{optional:!0}),this.eventsSubscription=new Uh,this.isNgZoneEnabled=E(q)instanceof q&&q.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vt&&i.code!==Re.Redirect&&i.code!==Re.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qt)this.navigated=!0;else if(i instanceof Ar){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Jv(s.source)};this.scheduleNavigation(a,wr,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ow(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=y({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Za),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=y(y({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let d;try{let m=s?s.snapshot:this.routerState.snapshot.root;d=Qd(m)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return Yd(d,r,h,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Rn(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,wr,null,i)}navigate(r,i={skipLocationChange:!1}){return sw(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=y({},rw):i===!1?s=y({},iw):s=i,Rn(r))return xd(this.currentUrlTree,r,s);let o=this.parseUrl(r);return xd(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((d,m)=>{c=d,l=m});let h=this.pendingTasks.add();return tw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sw(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}function ow(t){return!(t instanceof Cr)&&!(t instanceof Ar)}var aw=new W("");function gf(t,...e){return ur([{provide:nc,multi:!0,useValue:t},[],{provide:bn,useFactory:cw,deps:[pf]},{provide:vd,multi:!0,useFactory:lw},e.map(n=>n.\u0275providers)])}function cw(t){return t.routerState.root}function lw(){let t=E(ze);return e=>{let n=t.get(oa);if(e!==n.components[0])return;let r=t.get(pf),i=t.get(uw);t.get(hw)===1&&r.initialNavigation(),t.get(dw,null,Zo.Optional)?.setUpPreloading(),t.get(aw,null,Zo.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var uw=new W("",{factory:()=>new Lt}),hw=new W("",{providedIn:"root",factory:()=>1});var dw=new W("");var mf=[];var sc={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var p=function(t,e){if(!t)throw Wt(e)},Wt=function(t){return new Error("Firebase Database ("+sc.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var yf=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fw=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4,d=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(d=64)),r.push(n[u],n[h],n[d],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw new oc;let d=s<<2|a>>4;if(r.push(d),l!==64){let m=a<<4&240|l>>2;if(r.push(m),h!==64){let _=l<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},oc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cc=function(t){let e=yf(t);return fs.encodeByteArray(e,!0)},Or=function(t){return cc(t).replace(/\./g,"")},xr=function(t){try{return fs.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vf(t){return wf(void 0,t)}function wf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!pw(n)||(t[n]=wf(t[n],e[n]));return t}function pw(t){return t!=="__proto__"}function gw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mw=()=>gw().__FIREBASE_DEFAULTS__,_w=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&xr(t[1]);return e&&JSON.parse(e)},lc=()=>{try{return mw()||_w()||yw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uc=t=>{var e,n;return(n=(e=lc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ps=t=>{let e=uc(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hc=()=>{var t;return(t=lc())===null||t===void 0?void 0:t.config},dc=t=>{var e;return(e=lc())===null||e===void 0?void 0:e[`_${t}`]};var zt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function gs(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Or(JSON.stringify(n)),Or(JSON.stringify(o)),""].join(".")}function Q(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function If(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ms(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ef(){let t=Q();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function He(){return sc.NODE_CLIENT===!0||sc.NODE_ADMIN===!0}function fc(){try{return typeof indexedDB=="object"}catch{return!1}}function Tf(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var vw="FirebaseError",we=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vw,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ot.prototype.create)}},ot=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ww(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new we(i,a,r)}};function ww(t,e){return t.replace(Iw,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Iw=/\{\$([^}]+)}/g;function Dn(t){return JSON.parse(t)}function Y(t){return JSON.stringify(t)}var Sf=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Dn(xr(s[0])||""),n=Dn(xr(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var Cf=function(t){let e=Sf(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Af=function(t){let e=Sf(t).claims;return typeof e=="object"&&e.admin===!0};function Ke(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gt(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Lr(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vr(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ht(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(_f(s)&&_f(o)){if(!Ht(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function _f(t){return t!==null&&typeof t=="object"}function Kt(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ds=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){let d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):h<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let d=(i<<5|i>>>27)+l+c+u+r[h]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Rf(t,e){let n=new ac(t,e);return n.subscribe.bind(n)}var ac=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ew(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ic),i.error===void 0&&(i.error=ic),i.complete===void 0&&(i.complete=ic);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ew(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ic(){}function bf(t,e){return`${t} failed: ${e} argument `}var Pf=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,p(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Fr=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Vb=4*60*60*1e3;function xe(t){return t&&t._delegate?t._delegate:t}var pe=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Qt="[DEFAULT]";var _s=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sw(e))try{this.getOrInitializeService({instanceIdentifier:Qt})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Qt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return f(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Qt){return this.instances.has(e)}getOptions(e=Qt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qt){return this.component?this.component.multipleInstances?e:Qt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Tw(t){return t===Qt?void 0:t}function Sw(t){return t.instantiationMode==="EAGER"}var Ur=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new _s(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Cw=[],b=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(b||{}),Aw={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},Rw=b.INFO,bw={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},Pw=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=bw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qe=class{constructor(e){this.name=e,this._logLevel=Rw,this._logHandler=Pw,this._userLogHandler=null,Cw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in b))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...e),this._logHandler(this,b.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...e),this._logHandler(this,b.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,b.INFO,...e),this._logHandler(this,b.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,b.WARN,...e),this._logHandler(this,b.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...e),this._logHandler(this,b.ERROR,...e)}};var Nw=(t,e)=>e.some(n=>t instanceof n),Nf,Df;function Dw(){return Nf||(Nf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kw(){return Df||(Df=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kf=new WeakMap,gc=new WeakMap,Of=new WeakMap,pc=new WeakMap,_c=new WeakMap;function Ow(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ye(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kf.set(n,t)}).catch(()=>{}),_c.set(e,t),e}function xw(t){if(gc.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gc.set(t,e)}var mc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Of.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ye(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xf(t){mc=t(mc)}function Mw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ys(this),e,...n);return Of.set(r,e.sort?e.sort():[e]),Ye(r)}:kw().includes(t)?function(...e){return t.apply(ys(this),e),Ye(kf.get(this))}:function(...e){return Ye(t.apply(ys(this),e))}}function Lw(t){return typeof t=="function"?Mw(t):(t instanceof IDBTransaction&&xw(t),Nw(t,Dw())?new Proxy(t,mc):t)}function Ye(t){if(t instanceof IDBRequest)return Ow(t);if(pc.has(t))return pc.get(t);let e=Lw(t);return e!==t&&(pc.set(t,e),_c.set(e,t)),e}var ys=t=>_c.get(t);function Lf(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Ye(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ye(o.result),c.oldVersion,c.newVersion,Ye(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Vw=["get","getKey","getAll","getAllKeys","count"],Fw=["put","add","delete","clear"],yc=new Map;function Mf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yc.get(e))return yc.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Fw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vw.includes(n)))return;let s=function(o,...a){return f(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return yc.set(e,s),s}xf(t=>te(y({},t),{get:(e,n,r)=>Mf(e,n)||t.get(e,n,r),has:(e,n)=>!!Mf(e,n)||t.has(e,n)}));var wc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Uw(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Uw(t){let e=t.getComponent();return e?.type==="VERSION"}var Ic="@firebase/app",Vf="0.9.28";var Yt=new Qe("@firebase/app"),Bw="@firebase/app-compat",$w="@firebase/analytics-compat",qw="@firebase/analytics",jw="@firebase/app-check-compat",zw="@firebase/app-check",Ww="@firebase/auth",Gw="@firebase/auth-compat",Hw="@firebase/database",Kw="@firebase/database-compat",Qw="@firebase/functions",Yw="@firebase/functions-compat",Jw="@firebase/installations",Xw="@firebase/installations-compat",Zw="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",nI="@firebase/performance-compat",rI="@firebase/remote-config",iI="@firebase/remote-config-compat",sI="@firebase/storage",oI="@firebase/storage-compat",aI="@firebase/firestore",cI="@firebase/firestore-compat",lI="firebase",uI="10.8.1";var Ec="[DEFAULT]",hI={[Ic]:"fire-core",[Bw]:"fire-core-compat",[qw]:"fire-analytics",[$w]:"fire-analytics-compat",[zw]:"fire-app-check",[jw]:"fire-app-check-compat",[Ww]:"fire-auth",[Gw]:"fire-auth-compat",[Hw]:"fire-rtdb",[Kw]:"fire-rtdb-compat",[Qw]:"fire-fn",[Yw]:"fire-fn-compat",[Jw]:"fire-iid",[Xw]:"fire-iid-compat",[Zw]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[nI]:"fire-perf-compat",[rI]:"fire-rc",[iI]:"fire-rc-compat",[sI]:"fire-gcs",[oI]:"fire-gcs-compat",[aI]:"fire-fst",[cI]:"fire-fst-compat","fire-js":"fire-js",[lI]:"fire-js-all"};var Br=new Map,Tc=new Map;function dI(t,e){try{t.container.addComponent(e)}catch(n){Yt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Je(t){let e=t.name;if(Tc.has(e))return Yt.debug(`There were multiple attempts to register component ${e}.`),!1;Tc.set(e,t);for(let n of Br.values())dI(n,t);return!0}function Jt(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var fI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},It=new ot("app","Firebase",fI);var Sc=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw It.create("app-deleted",{appName:this._name})}};var Xe=uI;function Rc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ec,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw It.create("bad-app-name",{appName:String(i)});if(n||(n=hc()),!n)throw It.create("no-options");let s=Br.get(i);if(s){if(Ht(n,s.options)&&Ht(r,s.config))return s;throw It.create("duplicate-app",{appName:i})}let o=new Ur(i);for(let c of Tc.values())o.addComponent(c);let a=new Sc(n,r,o);return Br.set(i,a),a}function Et(t=Ec){let e=Br.get(t);if(!e&&t===Ec&&hc())return Rc();if(!e)throw It.create("no-app",{appName:t});return e}function vs(){return Array.from(Br.values())}function U(t,e,n){var r;let i=(r=hI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yt.warn(a.join(" "));return}Je(new pe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var pI="firebase-heartbeat-database",gI=1,$r="firebase-heartbeat-store",vc=null;function $f(){return vc||(vc=Lf(pI,gI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($r)}catch(n){console.warn(n)}}}}).catch(t=>{throw It.create("idb-open",{originalErrorMessage:t.message})})),vc}function mI(t){return f(this,null,function*(){try{let n=(yield $f()).transaction($r),r=yield n.objectStore($r).get(qf(t));return yield n.done,r}catch(e){if(e instanceof we)Yt.warn(e.message);else{let n=It.create("idb-get",{originalErrorMessage:e?.message});Yt.warn(n.message)}}})}function Ff(t,e){return f(this,null,function*(){try{let r=(yield $f()).transaction($r,"readwrite");yield r.objectStore($r).put(e,qf(t)),yield r.done}catch(n){if(n instanceof we)Yt.warn(n.message);else{let r=It.create("idb-set",{originalErrorMessage:n?.message});Yt.warn(r.message)}}})}function qf(t){return`${t.name}!${t.options.appId}`}var _I=1024,yI=30*24*60*60*1e3,Cc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ac(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Uf();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=yI}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return f(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Uf(),{heartbeatsToSend:r,unsentEntries:i}=vI(this._heartbeatsCache.heartbeats),s=Or(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Uf(){return new Date().toISOString().substring(0,10)}function vI(t,e=_I){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bf(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ac=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return fc()?Tf().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield mI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ff(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ff(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Bf(t){return Or(JSON.stringify({version:2,heartbeats:t})).length}function wI(t){Je(new pe("platform-logger",e=>new wc(e),"PRIVATE")),Je(new pe("heartbeat",e=>new Cc(e),"PRIVATE")),U(Ic,Vf,t),U(Ic,Vf,"esm2017"),U("fire-js","")}wI("");var II="firebase",EI="10.8.1";U(II,EI,"app");var at=new zi("ANGULARFIRE2_VERSION");function On(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Zt=(t,e)=>{let n=e?[e]:vs(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Tt=class{constructor(){return Zt(TI)}},TI="app-check";function kn(){}var ws=class{zone;delegate;constructor(e,n=qh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},bc=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kn,{},kn,kn)),n.pipe(G({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},St=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ws(Zone.current)),this.insideAngular=n.run(()=>new ws(Zone.current,$h)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(F(q))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Is(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function SI(t){return Is().ngZone.runOutsideAngular(()=>t())}function Xt(t){return Is().ngZone.run(()=>t())}function CI(t){return AI(Is())(t)}function AI(t){return function(n){return n=n.lift(new bc(t.ngZone)),n.pipe(Ko(t.outsideAngular),Ho(t.insideAngular))}}var RI=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Xt(()=>t.apply(void 0,r))},Ct=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Xt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kn,{},kn,kn))),r[s]=RI(r[s],n));let i=SI(()=>t.apply(this,r));if(!e)if(i instanceof jo){let s=Is();return i.pipe(Ko(s.outsideAngular),Ho(s.insideAngular))}else return Xt(()=>i);return i instanceof jo?i.pipe(CI):i instanceof Promise?Xt(()=>new Promise((s,o)=>i.then(a=>Xt(()=>s(a)),a=>Xt(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Xt(()=>i)};var Me=class{constructor(e){return e}},ct=class{constructor(){return vs()}};function bI(t){return t&&t.length===1?t[0]:new Me(Et())}var Pc=new W("angularfire2._apps"),PI={provide:Me,useFactory:bI,deps:[[new H,Pc]]},NI={provide:ct,deps:[[new H,Pc]]};function DI(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Me(r)}}var kI=(()=>{class t{constructor(n){U("angularfire",at.full,"core"),U("angularfire",at.full,"app"),U("angular",_d.full,n.toString())}static \u0275fac=function(r){return new(r||t)(F(Ft))};static \u0275mod=qe({type:t});static \u0275inj=je({providers:[PI,NI]})}return t})();function jf(t,...e){return{ngModule:kI,providers:[{provide:Pc,useFactory:DI(t),multi:!0,deps:[q,ze,St,...e]}]}}var zf=Ct(Rc,!0);function ip(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sp=ip,op=new ot("auth","Firebase",ip());var Rs=new Qe("@firebase/auth");function OI(t,...e){Rs.logLevel<=b.WARN&&Rs.warn(`Auth (${Xe}): ${t}`,...e)}function Ts(t,...e){Rs.logLevel<=b.ERROR&&Rs.error(`Auth (${Xe}): ${t}`,...e)}function Rt(t,...e){throw Qc(t,...e)}function en(t,...e){return Qc(t,...e)}function xI(t,e,n){let r=Object.assign(Object.assign({},sp()),{[e]:n});return new ot("auth","Firebase",r).create(e,{appName:t.name})}function Qc(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return op.create(t,...e)}function w(t,e,...n){if(!t)throw Qc(e,...n)}function lt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ts(e),new Error(e)}function bt(t,e){t||lt(e)}function Oc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function MI(){return Wf()==="http:"||Wf()==="https:"}function Wf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function LI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MI()||If()||"connection"in navigator)?navigator.onLine:!0}function VI(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var tn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,bt(n>e,"Short delay should be less than long delay!"),this.isMobile=Mr()||ms()}get(){return LI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yc(t,e){bt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var bs=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var FI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var UI=new tn(3e4,6e4);function Jc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function xn(s,o,a,c){return f(this,arguments,function*(t,e,n,r,i={}){return ap(t,i,()=>f(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let h=Kt(Object.assign({key:t.config.apiKey},u)).slice(1),d=yield t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),bs.fetch()(cp(t,t.config.apiHost,n,h),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},l))}))})}function ap(t,e,n){return f(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},FI),e);try{let i=new xc(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Es(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Es(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Es(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Es(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw xI(t,u,l);Rt(t,u)}}catch(i){if(i instanceof we)throw i;Rt(t,"network-request-failed",{message:String(i)})}})}function BI(s,o,a,c){return f(this,arguments,function*(t,e,n,r,i={}){let l=yield xn(t,e,n,r,i);return"mfaPendingCredential"in l&&Rt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function cp(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Yc(t.config,i):`${t.config.apiScheme}://${i}`}var xc=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),UI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Es(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=en(t,e,r);return i.customData._tokenResponse=n,i}function $I(t,e){return f(this,null,function*(){return xn(t,"POST","/v1/accounts:delete",e)})}function qI(t,e){return f(this,null,function*(){return xn(t,"POST","/v1/accounts:lookup",e)})}function qr(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Xc(t,e=!1){return f(this,null,function*(){let n=xe(t),r=yield n.getIdToken(e),i=Zc(r);w(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qr(Nc(i.auth_time)),issuedAtTime:qr(Nc(i.iat)),expirationTime:qr(Nc(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Nc(t){return Number(t)*1e3}function Zc(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ts("JWT malformed, contained fewer than 3 sections"),null;try{let i=xr(n);return i?JSON.parse(i):(Ts("Failed to decode base64 JWT payload"),null)}catch(i){return Ts("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jI(t){let e=Zc(t);return w(e,"internal-error"),w(typeof e.exp<"u","internal-error"),w(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function jr(t,e,n=!1){return f(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof we&&zI(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function zI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Mc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ps=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ns(t){return f(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield jr(t,qI(n,{idToken:r}));w(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?GI(s.providerUserInfo):[],a=WI(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ps(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)})}function el(t){return f(this,null,function*(){let e=xe(t);yield Ns(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WI(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GI(t){return t.map(e=>{var{providerId:n}=e,r=Go(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function HI(t,e){return f(this,null,function*(){let n=yield ap(t,{},()=>f(this,null,function*(){let r=Kt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=cp(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bs.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function KI(t,e){return f(this,null,function*(){return xn(t,"POST","/v2/accounts:revokeToken",Jc(t,e))})}var Ds=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(typeof e.idToken<"u","internal-error"),w(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return f(this,null,function*(){return w(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return f(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield HI(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(w(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(w(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(w(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return lt("not implemented")}};function At(t,e){w(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var zr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Go(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ps(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return f(this,null,function*(){let n=yield jr(this,this.stsTokenManager.getToken(this.auth,e));return w(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Xc(this,e)}reload(){return el(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return f(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ns(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){let e=yield this.getIdToken();return yield jr(this,$I(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,j=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,fe=(l=n.createdAt)!==null&&l!==void 0?l:void 0,st=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:Mt,emailVerified:Li,isAnonymous:Vh,providerData:$o,stsTokenManager:Fh}=n;w(Mt&&Fh,e,"internal-error");let Z_=Ds.fromJSON(this.name,Fh);w(typeof Mt=="string",e,"internal-error"),At(h,e.name),At(d,e.name),w(typeof Li=="boolean",e,"internal-error"),w(typeof Vh=="boolean",e,"internal-error"),At(m,e.name),At(_,e.name),At(N,e.name),At(j,e.name),At(fe,e.name),At(st,e.name);let qo=new t({uid:Mt,auth:e,email:d,emailVerified:Li,displayName:h,isAnonymous:Vh,photoURL:_,phoneNumber:m,tenantId:N,stsTokenManager:Z_,createdAt:fe,lastLoginAt:st});return $o&&Array.isArray($o)&&(qo.providerData=$o.map(ey=>Object.assign({},ey))),j&&(qo._redirectEventId=j),qo}static _fromIdTokenResponse(e,n,r=!1){return f(this,null,function*(){let i=new Ds;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ns(s),s})}};var Gf=new Map;function ut(t){bt(t instanceof Function,"Expected a class definition");let e=Gf.get(t);return e?(bt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gf.set(t,e),e)}var QI=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,r){return f(this,null,function*(){this.storage[n]=r})}_get(n){return f(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Lc=QI;function Ss(t,e,n){return`firebase:${t}:${e}:${n}`}var ks=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ss(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ss("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return f(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return f(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return f(this,null,function*(){if(!n.length)return new t(ut(Lc),e,r);let i=(yield Promise.all(n.map(l=>f(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ut(Lc),o=Ss(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let h=zr._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>f(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Hf(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fp(e))return"Blackberry";if(pp(e))return"Webos";if(tl(e))return"Safari";if((e.includes("chrome/")||up(e))&&!e.includes("edge/"))return"Chrome";if(dp(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function lp(t=Q()){return/firefox\//i.test(t)}function tl(t=Q()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function up(t=Q()){return/crios\//i.test(t)}function hp(t=Q()){return/iemobile/i.test(t)}function dp(t=Q()){return/android/i.test(t)}function fp(t=Q()){return/blackberry/i.test(t)}function pp(t=Q()){return/webos/i.test(t)}function Bs(t=Q()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YI(t=Q()){var e;return Bs(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JI(){return Ef()&&document.documentMode===10}function gp(t=Q()){return Bs(t)||dp(t)||pp(t)||fp(t)||/windows phone/i.test(t)||hp(t)}function XI(){try{return!!(window&&window!==window.top)}catch{return!1}}function mp(t,e=[]){let n;switch(t){case"Browser":n=Hf(Q());break;case"Worker":n=`${Hf(Q())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xe}/${r}`}var Vc=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return f(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function ZI(n){return f(this,arguments,function*(t,e={}){return xn(t,"GET","/v2/passwordPolicy",Jc(t,e))})}var eE=6,Fc=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eE,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Uc=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Os(this),this.idTokenSubscription=new Os(this),this.beforeStateQueue=new Vc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=op,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ut(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ks.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return f(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return w(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return f(this,null,function*(){try{yield Ns(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=VI()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return f(this,null,function*(){let n=e?xe(e):null;return n&&w(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return f(this,null,function*(){if(!this._deleted)return e&&w(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(ut(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let e=yield ZI(this),n=new Fc(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ot("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield KI(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return f(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ut(e)||this._popupRedirectResolver;w(n,this,"argument-error"),this.redirectPersistenceManager=yield ks.create(this,[ut(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return f(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return f(this,null,function*(){if(e===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(w(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return f(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return f(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&OI(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function nl(t){return xe(t)}var Os=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rf(n=>this.observer=n)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rl={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tE(t){rl=t}function nE(t){return rl.loadJS(t)}function rE(){return rl.gapiScript}function _p(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function il(t,e){let n=Jt(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ht(s,e??{}))return i;Rt(i,"already-initialized")}return n.initialize({options:e})}function iE(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ut);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function sl(t,e,n){let r=nl(t);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=yp(e),{host:o,port:a}=sE(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||oE()}function yp(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sE(t){let e=yp(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Kf(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Kf(o)}}}function Kf(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function oE(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var xs=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lt("not implemented")}_getIdTokenResponse(e){return lt("not implemented")}_linkToIdToken(e,n){return lt("not implemented")}_getReauthenticationResolver(e){return lt("not implemented")}};function Dc(t,e){return f(this,null,function*(){return BI(t,"POST","/v1/accounts:signInWithIdp",Jc(t,e))})}var Ms=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bc=class extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Wr=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return f(this,null,function*(){let s=yield zr._fromIdTokenResponse(e,r,i),o=Qf(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return f(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Qf(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Qf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var $c=class t extends we{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function vp(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(t,s,e,r):s})}function aE(t,e,n=!1){return f(this,null,function*(){let r=yield jr(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Wr._forOperation(t,"link",r)})}function cE(t,e,n=!1){return f(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let s=yield jr(t,vp(r,i,e,t),n);w(s.idToken,r,"internal-error");let o=Zc(s.idToken);w(o,r,"internal-error");let{sub:a}=o;return w(t.uid===a,r,"user-mismatch"),Wr._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Rt(r,"user-mismatch"),s}})}function lE(t,e,n=!1){return f(this,null,function*(){let r="signIn",i=yield vp(t,r,e),s=yield Wr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function ol(t,e,n,r){return xe(t).onIdTokenChanged(e,n,r)}function al(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}var Ls="__sak";var Vs=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ls,"1"),this.storage.removeItem(Ls),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function uE(){let t=Q();return tl(t)||Bs(t)}var hE=1e3,dE=10,fE=(()=>{class t extends Vs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=uE()&&XI(),this.fallbackToPolling=gp(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);JI()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,dE):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},hE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return f(this,null,function*(){yield gt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return f(this,null,function*(){let r=yield gt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return f(this,null,function*(){yield gt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),wp=fE;var pE=(()=>{class t extends Vs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),cl=pE;function gE(t){return Promise.all(t.map(e=>f(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var mE=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>f(this,null,function*(){return u(r.origin,o)})),l=yield gE(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Ip(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var qc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return f(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Ip("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ze(){return window}function _E(t){Ze().location.href=t}function Ep(){return typeof Ze().WorkerGlobalScope<"u"&&typeof Ze().importScripts=="function"}function yE(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vE(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wE(){return Ep()?self:null}var Tp="firebaseLocalStorageDb",IE=1,Fs="firebaseLocalStorage",Sp="fbase_key",nn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function $s(t,e){return t.transaction([Fs],e?"readwrite":"readonly").objectStore(Fs)}function EE(){let t=indexedDB.deleteDatabase(Tp);return new nn(t).toPromise()}function jc(){let t=indexedDB.open(Tp,IE);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Fs,{keyPath:Sp})}catch(i){n(i)}}),t.addEventListener("success",()=>f(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Fs)?e(r):(r.close(),yield EE(),e(yield jc()))}))})}function Yf(t,e,n){return f(this,null,function*(){let r=$s(t,!0).put({[Sp]:e,value:n});return new nn(r).toPromise()})}function TE(t,e){return f(this,null,function*(){let n=$s(t,!1).get(e),r=yield new nn(n).toPromise();return r===void 0?null:r.value})}function Jf(t,e){let n=$s(t,!0).delete(e);return new nn(n).toPromise()}var SE=800,CE=3,AE=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield jc(),this.db)})}_withRetries(n){return f(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>CE)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return Ep()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=mE._getInstance(wE()),this.receiver._subscribe("keyChanged",(n,r)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){var n,r;if(this.activeServiceWorker=yield yE(),!this.activeServiceWorker)return;this.sender=new qc(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vE()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield jc();return yield Yf(n,Ls,"1"),yield Jf(n,Ls),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>Yf(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let r=yield this._withRetries(i=>TE(i,n));return this.localCache[n]=r,r})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>Jf(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(s=>{let o=$s(s,!1).getAll();return new nn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),SE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Cp=AE;var P1=_p("rcb"),N1=new tn(3e4,6e4);function RE(t,e){return e?ut(e):(w(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Gr=class extends xs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dc(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function bE(t){return lE(t.auth,new Gr(t),t.bypassAuthState)}function PE(t){let{auth:e,user:n}=t;return w(n,e,"internal-error"),cE(n,new Gr(t),t.bypassAuthState)}function NE(t){return f(this,null,function*(){let{auth:e,user:n}=t;return w(n,e,"internal-error"),aE(n,new Gr(t),t.bypassAuthState)})}var zc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>f(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return f(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bE;case"linkViaPopup":case"linkViaRedirect":return NE;case"reauthViaPopup":case"reauthViaRedirect":return PE;default:Rt(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var D1=new tn(2e3,1e4);var DE="pendingRedirect",Cs=new Map,Wc=class t extends zc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return f(this,null,function*(){let e=Cs.get(this.auth._key());if(!e){try{let r=(yield kE(this.resolver,this.auth))?yield gt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cs.set(this.auth._key(),e)}return this.bypassAuthState||Cs.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return f(this,null,function*(){if(e.type==="signInViaRedirect")return gt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,gt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function kE(t,e){return f(this,null,function*(){let n=ME(e),r=xE(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function OE(t,e){Cs.set(t._key(),e)}function xE(t){return ut(t._redirectPersistence)}function ME(t){return Ss(DE,t.config.apiKey,t.name)}function LE(t,e,n=!1){return f(this,null,function*(){let r=nl(t),i=RE(r,e),o=yield new Wc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var VE=10*60*1e3,Gc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FE(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ap(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xf(e))}saveEventToCache(e){this.cachedEventUids.add(Xf(e)),this.lastProcessedEventTime=Date.now()}};function Xf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ap({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function FE(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ap(t);default:return!1}}function UE(n){return f(this,arguments,function*(t,e={}){return xn(t,"GET","/v1/projects",e)})}var BE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$E=/^https?/;function qE(t){return f(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield UE(t);for(let n of e)try{if(jE(n))return}catch{}Rt(t,"unauthorized-domain")})}function jE(t){let e=Oc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$E.test(n))return!1;if(BE.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var zE=new tn(3e4,6e4);function Zf(){let t=Ze().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WE(t){return new Promise((e,n)=>{var r,i,s;function o(){Zf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zf(),n(en(t,"network-request-failed"))},timeout:zE.get()})}if(!((i=(r=Ze().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ze().gapi)===null||s===void 0)&&s.load)o();else{let a=_p("iframefcb");return Ze()[a]=()=>{gapi.load?o():n(en(t,"network-request-failed"))},nE(`${rE()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw As=null,e})}var As=null;function GE(t){return As=As||WE(t),As}var HE=new tn(5e3,15e3),KE="__/auth/iframe",QE="emulator/auth/iframe",YE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XE(t){let e=t.config;w(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Yc(e,QE):`https://${t.config.authDomain}/${KE}`,r={apiKey:e.apiKey,appName:t.name,v:Xe},i=JE.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Kt(r).slice(1)}`}function ZE(t){return f(this,null,function*(){let e=yield GE(t),n=Ze().gapi;return w(n,t,"internal-error"),e.open({where:document.body,url:XE(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YE,dontclear:!0},r=>new Promise((i,s)=>f(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=en(t,"network-request-failed"),a=Ze().setTimeout(()=>{s(o)},HE.get());function c(){Ze().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var eT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tT=500,nT=600,rT="_blank",iT="http://localhost",Us=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sT(t,e,n,r=tT,i=nT){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},eT),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Q().toLowerCase();n&&(a=up(l)?rT:n),lp(l)&&(e=e||iT,c.scrollbars="yes");let u=Object.entries(c).reduce((d,[m,_])=>`${d}${m}=${_},`,"");if(YI(l)&&a!=="_self")return oT(e||"",a),new Us(null);let h=window.open(e||"",a,u);w(h,t,"popup-blocked");try{h.focus()}catch{}return new Us(h)}function oT(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var aT="__/auth/handler",cT="emulator/auth/handler",lT=encodeURIComponent("fac");function ep(t,e,n,r,i,s){return f(this,null,function*(){w(t.config.authDomain,t,"auth-domain-config-required"),w(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xe,eventId:i};if(e instanceof Ms){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lr(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Bc){let u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${lT}=${encodeURIComponent(c)}`:"";return`${uT(t)}?${Kt(a).slice(1)}${l}`})}function uT({config:t}){return t.emulator?Yc(t,cT):`https://${t.authDomain}/${aT}`}var kc="webStorageSupport",Hc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cl,this._completeRedirectFn=LE,this._overrideRedirectResult=OE}_openPopup(e,n,r,i){return f(this,null,function*(){var s;bt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ep(e,n,r,Oc(),i);return sT(e,o,Ip())})}_openRedirect(e,n,r,i){return f(this,null,function*(){yield this._originValidation(e);let s=yield ep(e,n,r,Oc(),i);return _E(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(bt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return f(this,null,function*(){let n=yield ZE(e),r=new Gc(e);return n.register("authEvent",i=>(w(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kc,{type:kc},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[kc];o!==void 0&&n(!!o),Rt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qE(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gp()||tl()||Bs()}},Rp=Hc;var tp="@firebase/auth",np="1.6.1";var Kc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dT(t){Je(new pe("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;w(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mp(t)},l=new Uc(r,i,s,c);return iE(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Je(new pe("auth-internal",e=>{let n=nl(e.getProvider("auth").getImmediate());return(r=>new Kc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),U(tp,np,hT(t)),U(tp,np,"esm2017")}var fT=5*60,pT=dc("authIdTokenMaxAge")||fT,rp=null,gT=t=>e=>f(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pT)return;let i=n?.token;rp!==i&&(rp=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ll(t=Et()){let e=Jt(t,"auth");if(e.isInitialized())return e.getImmediate();let n=il(t,{popupRedirectResolver:Rp,persistence:[Cp,wp,cl]}),r=dc("authTokenSyncURL");if(r){let s=gT(r);al(n,s,()=>s(n.currentUser)),ol(n,o=>s(o))}let i=uc("auth");return i&&sl(n,`http://${i}`),n}function mT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tE({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=en("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dT("Browser");var bp="auth",Hr=class{constructor(e){return e}},rn=class{constructor(){return Zt(bp)}};var ul=new W("angularfire2.auth-instances");function u0(t,e){let n=On(bp,t,e);return n&&new Hr(n)}function h0(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hr(r)}}var d0={provide:rn,deps:[[new H,ul]]},f0={provide:Hr,useFactory:u0,deps:[[new H,ul],Me]},p0=(()=>{class t{constructor(){U("angularfire",at.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qe({type:t});static \u0275inj=je({providers:[f0,d0]})}return t})();function Pp(t,...e){return{ngModule:p0,providers:[{provide:ul,useFactory:h0(t),multi:!0,deps:[q,ze,St,ct,[new H,Tt],...e]}]}}var Np=Ct(ll,!0);var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ve={},g,kl=kl||{},v=g0||self;function to(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ai(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function m0(t){return Object.prototype.hasOwnProperty.call(t,hl)&&t[hl]||(t[hl]=++_0)}var hl="closure_uid_"+(1e9*Math.random()>>>0),_0=0;function y0(t,e,n){return t.call.apply(t.bind,arguments)}function v0(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ae(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ae=y0:ae=v0,ae.apply(null,arguments)}function qs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function X(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Pt(){this.s=this.s,this.o=this.o}var w0=0;Pt.prototype.s=!1;Pt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),w0!=0)&&m0(this)};Pt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ol(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Dp(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(to(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function ce(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var I0=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};v.addEventListener("test",n,e),v.removeEventListener("test",n,e)}catch{}return t}();function Zr(t){return/^[\s\xa0]*$/.test(t)}function no(){var t=v.navigator;return t&&(t=t.userAgent)?t:""}function et(t){return no().indexOf(t)!=-1}function xl(t){return xl[" "](t),t}xl[" "]=function(){};function E0(t,e){var n=uS;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var T0=et("Opera"),Fn=et("Trident")||et("MSIE"),zp=et("Edge"),ml=zp||Fn,Wp=et("Gecko")&&!(no().toLowerCase().indexOf("webkit")!=-1&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),S0=no().toLowerCase().indexOf("webkit")!=-1&&!et("Edge");function Gp(){var t=v.document;return t?t.documentMode:void 0}var _l;e:{if(js="",zs=function(){var t=no();if(Wp)return/rv:([^\);]+)(\)|;)/.exec(t);if(zp)return/Edge\/([\d\.]+)/.exec(t);if(Fn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(S0)return/WebKit\/(\S+)/.exec(t);if(T0)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),zs&&(js=zs?zs[1]:""),Fn&&(Ws=Gp(),Ws!=null&&Ws>parseFloat(js))){_l=String(Ws);break e}_l=js}var js,zs,Ws,yl;v.document&&Fn?(dl=Gp(),yl=dl||parseInt(_l,10)||void 0):yl=void 0;var dl,C0=yl;function ei(t,e){if(ce.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Wp){e:{try{xl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:A0[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ei.$.h.call(this)}}X(ei,ce);var A0={2:"touch",3:"pen",4:"mouse"};ei.prototype.h=function(){ei.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ci="closure_listenable_"+(1e6*Math.random()|0),R0=0;function b0(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++R0,this.fa=this.ia=!1}function ro(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ml(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function P0(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Hp(t){let e={};for(let n in t)e[n]=t[n];return e}var kp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kp(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<kp.length;s++)n=kp[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function io(t){this.src=t,this.g={},this.h=0}io.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=wl(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new b0(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function vl(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=jp(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ro(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function wl(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Ll="closure_lm_"+(1e6*Math.random()|0),fl={};function Qp(t,e,n,r,i){if(r&&r.once)return Jp(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Qp(t,e[s],n,r,i);return null}return n=Ul(n),t&&t[ci]?t.O(e,n,ai(r)?!!r.capture:!!r,i):Yp(t,e,n,!1,r,i)}function Yp(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ai(i)?!!i.capture:!!i,a=Fl(t);if(a||(t[Ll]=a=new io(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=N0(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)I0||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Zp(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function N0(){function t(n){return e.call(t.src,t.listener,n)}let e=D0;return t}function Jp(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Jp(t,e[s],n,r,i);return null}return n=Ul(n),t&&t[ci]?t.P(e,n,ai(r)?!!r.capture:!!r,i):Yp(t,e,n,!0,r,i)}function Xp(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Xp(t,e[s],n,r,i);else r=ai(r)?!!r.capture:!!r,n=Ul(n),t&&t[ci]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=wl(s,n,r,i),-1<n&&(ro(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Fl(t))&&(e=t.g[e.toString()],t=-1,e&&(t=wl(e,n,r,i)),(n=-1<t?e[t]:null)&&Vl(n))}function Vl(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ci])vl(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Zp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fl(e))?(vl(n,t),n.h==0&&(n.src=null,e[Ll]=null)):ro(t)}}}function Zp(t){return t in fl?fl[t]:fl[t]="on"+t}function D0(t,e){if(t.fa)t=!0;else{e=new ei(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Vl(t),t=n.call(r,e)}return t}function Fl(t){return t=t[Ll],t instanceof io?t:null}var pl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ul(t){return typeof t=="function"?t:(t[pl]||(t[pl]=function(e){return t.handleEvent(e)}),t[pl])}function J(){Pt.call(this),this.i=new io(this),this.S=this,this.J=null}X(J,Pt);J.prototype[ci]=!0;J.prototype.removeEventListener=function(t,e,n,r){Xp(this,t,e,n,r)};function se(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ce(e,t);else if(e instanceof ce)e.target=e.target||t;else{var i=e;e=new ce(r,t),Kp(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Gs(o,r,!0,e)&&i}if(o=e.g=t,i=Gs(o,r,!0,e)&&i,i=Gs(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Gs(o,r,!1,e)&&i}J.prototype.N=function(){if(J.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ro(n[r]);delete t.g[e],t.h--}}this.J=null};J.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};J.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gs(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&vl(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Bl=v.JSON.stringify,Il=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function k0(){var t=$l;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var El=class{constructor(){this.h=this.g=null}add(e,n){let r=eg.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},eg=new Il(()=>new Tl,t=>t.reset()),Tl=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function O0(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function x0(t){v.setTimeout(()=>{throw t},0)}var ti,ni=!1,$l=new El,tg=()=>{let t=v.Promise.resolve(void 0);ti=()=>{t.then(M0)}},M0=()=>{for(var t;t=k0();){try{t.h.call(t.g)}catch(n){x0(n)}var e=eg;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ni=!1};function so(t,e){J.call(this),this.h=t||1,this.g=e||v,this.j=ae(this.qb,this),this.l=Date.now()}X(so,J);g=so.prototype;g.ga=!1;g.T=null;g.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),se(this,"tick"),this.ga&&(ql(this),this.start()))}};g.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ql(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}g.N=function(){so.$.N.call(this),ql(this),delete this.g};function jl(t,e,n){if(typeof t=="function")n&&(t=ae(t,n));else if(t&&typeof t.handleEvent=="function")t=ae(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:v.setTimeout(t,e||0)}function ng(t){t.g=jl(()=>{t.g=null,t.i&&(t.i=!1,ng(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Sl=class extends Pt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ng(this)}N(){super.N(),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function ri(t){Pt.call(this),this.h=t,this.g={}}X(ri,Pt);var Op=[];function rg(t,e,n,r){Array.isArray(n)||(n&&(Op[0]=n.toString()),n=Op);for(var i=0;i<n.length;i++){var s=Qp(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ig(t){Ml(t.g,function(e,n){this.g.hasOwnProperty(n)&&Vl(e)},t),t.g={}}ri.prototype.N=function(){ri.$.N.call(this),ig(this)};ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function oo(){this.g=!0}oo.prototype.Ea=function(){this.g=!1};function L0(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function V0(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ln(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+U0(t,n)+(r?" "+r:"")})}function F0(t,e){t.info(function(){return"TIMEOUT: "+e})}oo.prototype.info=function(){};function U0(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Bl(n)}catch{return e}}var cn={},xp=null;function ao(){return xp=xp||new J}cn.Ta="serverreachability";function sg(t){ce.call(this,cn.Ta,t)}X(sg,ce);function ii(t){let e=ao();se(e,new sg(e))}cn.STAT_EVENT="statevent";function og(t,e){ce.call(this,cn.STAT_EVENT,t),this.stat=e}X(og,ce);function de(t){let e=ao();se(e,new og(e,t))}cn.Ua="timingevent";function ag(t,e){ce.call(this,cn.Ua,t),this.size=e}X(ag,ce);function li(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){t()},e)}var co={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zl(){}zl.prototype.h=null;function Mp(t){return t.h||(t.h=t.i())}function lg(){}var ui={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Wl(){ce.call(this,"d")}X(Wl,ce);function Gl(){ce.call(this,"c")}X(Gl,ce);var Cl;function lo(){}X(lo,zl);lo.prototype.g=function(){return new XMLHttpRequest};lo.prototype.i=function(){return{}};Cl=new lo;function hi(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ri(this),this.P=B0,t=ml?125:void 0,this.V=new so(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ug}function ug(){this.i=null,this.g="",this.h=!1}var B0=45e3,hg={},Al={};g=hi.prototype;g.setTimeout=function(t){this.P=t};function Rl(t,e,n){t.L=1,t.A=ho(dt(e)),t.u=n,t.S=!0,dg(t,null)}function dg(t,e){t.G=Date.now(),di(t),t.B=dt(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),wg(n.i,"t",r),t.o=0,n=t.l.J,t.h=new ug,t.g=$g(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Sl(ae(t.Pa,t,t.g),t.O)),rg(t.U,t.g,"readystatechange",t.nb),e=t.I?Hp(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ii(),L0(t.j,t.v,t.B,t.m,t.W,t.u)}g.nb=function(t){t=t.target;let e=this.M;e&&tt(t)==3?e.l():this.Pa(t)};g.Pa=function(t){try{if(t==this.g)e:{let u=tt(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>u)&&(u!=3||ml||this.g&&(this.h.h||this.g.ja()||Up(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?ii(3):ii(2)),uo(this);var n=this.g.da();this.ca=n;t:if(fg(this)){var r=Up(this.g);t="";var i=r.length,s=tt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),Xr(this);var o="";break t}this.h.i=new v.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,V0(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zr(a)){var l=a;break t}}l=null}if(n=l)Ln(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bl(this,n);else{this.i=!1,this.s=3,de(12),sn(this),Xr(this);break e}}this.S?(pg(this,u,o),ml&&this.i&&u==3&&(rg(this.U,this.V,"tick",this.mb),this.V.start())):(Ln(this.j,this.m,o,null),bl(this,o)),u==4&&sn(this),this.i&&!this.J&&(u==4?Vg(this.l,this):(this.i=!1,di(this)))}else aS(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),sn(this),Xr(this)}}}catch{}finally{}};function fg(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function pg(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=$0(t,n),i==Al){e==4&&(t.s=4,de(14),r=!1),Ln(t.j,t.m,null,"[Incomplete Response]");break}else if(i==hg){t.s=4,de(15),Ln(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ln(t.j,t.m,i,null),bl(t,i);fg(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,de(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xl(e),e.M=!0,de(11))):(Ln(t.j,t.m,n,"[Invalid Chunked Response]"),sn(t),Xr(t))}g.mb=function(){if(this.g){var t=tt(this.g),e=this.g.ja();this.o<e.length&&(uo(this),pg(this,t,e),this.i&&t!=4&&di(this))}};function $0(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Al:(n=Number(e.substring(n,r)),isNaN(n)?hg:(r+=1,r+n>e.length?Al:(e=e.slice(r,r+n),t.o=r+n,e)))}g.cancel=function(){this.J=!0,sn(this)};function di(t){t.Y=Date.now()+t.P,gg(t,t.P)}function gg(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=li(ae(t.lb,t),e)}function uo(t){t.C&&(v.clearTimeout(t.C),t.C=null)}g.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(F0(this.j,this.B),this.L!=2&&(ii(),de(17)),sn(this),this.s=2,Xr(this)):gg(this,this.Y-t)};function Xr(t){t.l.H==0||t.J||Vg(t.l,t)}function sn(t){uo(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ql(t.V),ig(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function bl(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Pl(n.i,t))){if(!t.K&&Pl(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Js(n),go(n);else break e;Jl(n),de(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=li(ae(n.ib,n),6e3));if(1>=Tg(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else on(n,11)}else if((t.K||n.g==t)&&Js(n),!Zr(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let m=t.g;if(m){let _=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=r.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Hl(s,s.h),s.h=null))}if(r.F){let N=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;N&&(r.Da=N,L(r.I,r.F,N))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Bg(r,r.J?r.pa:null,r.Y),o.K){Sg(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(uo(a),di(a)),r.g=o}else Mg(r);0<n.j.length&&mo(n)}else l[0]!="stop"&&l[0]!="close"||on(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?on(n,7):Yl(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}ii(4)}catch{}}function q0(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(to(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function j0(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(to(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function mg(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(to(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=j0(t),r=q0(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var _g=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function z0(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function an(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof an){this.h=t.h,Qs(this,t.j),this.s=t.s,this.g=t.g,Ys(this,t.m),this.l=t.l;var e=t.i,n=new si;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Lp(this,n),this.o=t.o}else t&&(e=String(t).match(_g))?(this.h=!1,Qs(this,e[1]||"",!0),this.s=Yr(e[2]||""),this.g=Yr(e[3]||"",!0),Ys(this,e[4]),this.l=Yr(e[5]||"",!0),Lp(this,e[6]||"",!0),this.o=Yr(e[7]||"")):(this.h=!1,this.i=new si(null,this.h))}an.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Jr(e,Vp,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Jr(e,Vp,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Jr(n,n.charAt(0)=="/"?H0:G0,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Jr(n,Q0)),t.join("")};function dt(t){return new an(t)}function Qs(t,e,n){t.j=n?Yr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ys(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Lp(t,e,n){e instanceof si?(t.i=e,Y0(t.i,t.h)):(n||(e=Jr(e,K0)),t.i=new si(e,t.h))}function L(t,e,n){t.i.set(e,n)}function ho(t){return L(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Yr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Jr(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,W0),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function W0(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Vp=/[#\/\?@]/g,G0=/[#\?:]/g,H0=/[#\?]/g,K0=/[#\?@]/g,Q0=/#/g;function si(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Nt(t){t.g||(t.g=new Map,t.h=0,t.i&&z0(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}g=si.prototype;g.add=function(t,e){Nt(this),this.i=null,t=Un(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function yg(t,e){Nt(t),e=Un(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function vg(t,e){return Nt(t),e=Un(t,e),t.g.has(e)}g.forEach=function(t,e){Nt(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};g.ta=function(){Nt(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};g.Z=function(t){Nt(this);let e=[];if(typeof t=="string")vg(this,t)&&(e=e.concat(this.g.get(Un(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};g.set=function(t,e){return Nt(this),this.i=null,t=Un(this,t),vg(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};g.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function wg(t,e,n){yg(t,e),0<n.length&&(t.i=null,t.g.set(Un(t,e),Ol(n)),t.h+=n.length)}g.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Un(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Y0(t,e){e&&!t.j&&(Nt(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(yg(this,r),wg(this,i,n))},t)),t.j=e}var J0=class{constructor(t,e){this.g=t,this.map=e}};function Ig(t){this.l=t||X0,v.PerformanceNavigationTiming?(t=v.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(v.g&&v.g.Ka&&v.g.Ka()&&v.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var X0=10;function Eg(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Tg(t){return t.h?1:t.g?t.g.size:0}function Pl(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Hl(t,e){t.g?t.g.add(e):t.h=e}function Sg(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Ig.prototype.cancel=function(){if(this.i=Cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Cg(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Ol(t.i)}var Z0=class{stringify(t){return v.JSON.stringify(t,void 0)}parse(t){return v.JSON.parse(t,void 0)}};function eS(){this.g=new Z0}function tS(t,e,n){let r=n||"";try{mg(t,function(i,s){let o=i;ai(i)&&(o=Bl(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nS(t,e){let n=new oo;if(v.Image){let r=new Image;r.onload=qs(Hs,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qs(Hs,n,r,"TestLoadImage: error",!1,e),r.onabort=qs(Hs,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qs(Hs,n,r,"TestLoadImage: timeout",!1,e),v.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Hs(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function fi(t){this.l=t.ec||null,this.j=t.ob||!1}X(fi,zl);fi.prototype.g=function(){return new fo(this.l,this.j)};fi.prototype.i=function(t){return function(){return t}}({});function fo(t,e){J.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Kl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}X(fo,J);var Kl=0;g=fo.prototype;g.open=function(t,e){if(this.readyState!=Kl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,oi(this)};g.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||v).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};g.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=Kl};g.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof v.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ag(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Ag(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}g.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?pi(this):oi(this),this.readyState==3&&Ag(this)}};g.Za=function(t){this.g&&(this.response=this.responseText=t,pi(this))};g.Ya=function(t){this.g&&(this.response=t,pi(this))};g.ka=function(){this.g&&pi(this)};function pi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,oi(t)}g.setRequestHeader=function(t,e){this.v.append(t,e)};g.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};g.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function oi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var rS=v.JSON.parse;function $(t){J.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Rg,this.L=this.M=!1}X($,J);var Rg="",iS=/^https?$/i,sS=["POST","PUT"];g=$.prototype;g.Oa=function(t){this.M=t};g.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cl.g(),this.C=this.u?Mp(this.u):Mp(Cl),this.g.onreadystatechange=ae(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Fp(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=v.FormData&&t instanceof v.FormData,!(0<=jp(sS,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ng(this),0<this.B&&((this.L=oS(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ae(this.ua,this)):this.A=jl(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Fp(this,s)}};function oS(t){return Fn&&typeof t.timeout=="number"&&t.ontimeout!==void 0}g.ua=function(){typeof kl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,se(this,"timeout"),this.abort(8))};function Fp(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bg(t),po(t)}function bg(t){t.F||(t.F=!0,se(t,"complete"),se(t,"error"))}g.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,se(this,"complete"),se(this,"abort"),po(this))};g.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),po(this,!0)),$.$.N.call(this)};g.La=function(){this.s||(this.G||this.v||this.l?Pg(this):this.kb())};g.kb=function(){Pg(this)};function Pg(t){if(t.h&&typeof kl<"u"&&(!t.C[1]||tt(t)!=4||t.da()!=2)){if(t.v&&tt(t)==4)jl(t.La,0,t);else if(se(t,"readystatechange"),tt(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(_g)[1]||null;!i&&v.self&&v.self.location&&(i=v.self.location.protocol.slice(0,-1)),r=!iS.test(i?i.toLowerCase():"")}n=r}if(n)se(t,"complete"),se(t,"success");else{t.m=6;try{var s=2<tt(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",bg(t)}}finally{po(t)}}}}function po(t,e){if(t.g){Ng(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||se(t,"ready");try{n.onreadystatechange=r}catch{}}}function Ng(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(v.clearTimeout(t.A),t.A=null)}g.isActive=function(){return!!this.g};function tt(t){return t.g?t.g.readyState:0}g.da=function(){try{return 2<tt(this)?this.g.status:-1}catch{return-1}};g.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};g.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),rS(e)}};function Up(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Rg:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function aS(t){let e={};t=(t.g&&2<=tt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Zr(t[r]))continue;var n=O0(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}P0(e,function(r){return r.join(", ")})}g.Ia=function(){return this.m};g.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Dg(t){let e="";return Ml(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ql(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dg(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):L(t,e,n))}function Kr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function kg(t){this.Ga=0,this.j=[],this.l=new oo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Kr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Kr("baseRetryDelayMs",5e3,t),this.hb=Kr("retryDelaySeedMs",1e4,t),this.eb=Kr("forwardChannelMaxRetries",2,t),this.xa=Kr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Ig(t&&t.concurrentRequestLimit),this.Ja=new eS,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}g=kg.prototype;g.ra=8;g.H=1;function Yl(t){if(Og(t),t.H==3){var e=t.W++,n=dt(t.I);if(L(n,"SID",t.K),L(n,"RID",e),L(n,"TYPE","terminate"),gi(t,n),e=new hi(t,t.l,e),e.L=2,e.A=ho(dt(n)),n=!1,v.navigator&&v.navigator.sendBeacon)try{n=v.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&v.Image&&(new Image().src=e.A,n=!0),n||(e.g=$g(e.l,null),e.g.ha(e.A)),e.G=Date.now(),di(e)}Ug(t)}function go(t){t.g&&(Xl(t),t.g.cancel(),t.g=null)}function Og(t){go(t),t.u&&(v.clearTimeout(t.u),t.u=null),Js(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&v.clearTimeout(t.m),t.m=null)}function mo(t){if(!Eg(t.i)&&!t.m){t.m=!0;var e=t.Na;ti||tg(),ni||(ti(),ni=!0),$l.add(e,t),t.C=0}}function cS(t,e){return Tg(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=li(ae(t.Na,t,e),Fg(t,t.C)),t.C++,!0)}g.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new hi(this,this.l,t),s=this.s;if(this.U&&(s?(s=Hp(s),Kp(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xg(this,i,e),n=dt(this.I),L(n,"RID",t),L(n,"CVER",22),this.F&&L(n,"X-HTTP-Session-Id",this.F),gi(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Dg(s)))+"&"+e:this.o&&Ql(n,this.o,s)),Hl(this.i,i),this.bb&&L(n,"TYPE","init"),this.P?(L(n,"$req",e),L(n,"SID","null"),i.aa=!0,Rl(i,n,null)):Rl(i,n,e),this.H=2}}else this.H==3&&(t?Bp(this,t):this.j.length==0||Eg(this.i)||Bp(this))};function Bp(t,e){var n;e?n=e.m:n=t.W++;let r=dt(t.I);L(r,"SID",t.K),L(r,"RID",n),L(r,"AID",t.V),gi(t,r),t.o&&t.s&&Ql(r,t.o,t.s),n=new hi(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=xg(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Hl(t.i,n),Rl(n,r,e)}function gi(t,e){t.na&&Ml(t.na,function(n,r){L(e,r,n)}),t.h&&mg({},function(n,r){L(e,r,n)})}function xg(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ae(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{tS(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Mg(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ti||tg(),ni||(ti(),ni=!0),$l.add(e,t),t.A=0}}function Jl(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=li(ae(t.Ma,t),Fg(t,t.A)),t.A++,!0)}g.Ma=function(){if(this.u=null,Lg(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=li(ae(this.jb,this),t)}};g.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,de(10),go(this),Lg(this))};function Xl(t){t.B!=null&&(v.clearTimeout(t.B),t.B=null)}function Lg(t){t.g=new hi(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=dt(t.wa);L(e,"RID","rpc"),L(e,"SID",t.K),L(e,"AID",t.V),L(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&L(e,"TO",t.qa),L(e,"TYPE","xmlhttp"),gi(t,e),t.o&&t.s&&Ql(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ho(dt(e)),n.u=null,n.S=!0,dg(n,t)}g.ib=function(){this.v!=null&&(this.v=null,go(this),Jl(this),de(19))};function Js(t){t.v!=null&&(v.clearTimeout(t.v),t.v=null)}function Vg(t,e){var n=null;if(t.g==e){Js(t),Xl(t),t.g=null;var r=2}else if(Pl(t.i,e))n=e.F,Sg(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ao(),se(r,new ag(r,n)),mo(t)}else Mg(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&cS(t,e)||r==2&&Jl(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:on(t,5);break;case 4:on(t,10);break;case 3:on(t,6);break;default:on(t,2)}}}function Fg(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function on(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ae(t.pb,t);n||(n=new an("//www.google.com/images/cleardot.gif"),v.location&&v.location.protocol=="http"||Qs(n,"https"),ho(n)),nS(n.toString(),r)}else de(2);t.H=0,t.h&&t.h.za(e),Ug(t),Og(t)}g.pb=function(t){t?(this.l.info("Successfully pinged google.com"),de(2)):(this.l.info("Failed to ping google.com"),de(1))};function Ug(t){if(t.H=0,t.ma=[],t.h){let e=Cg(t.i);(e.length!=0||t.j.length!=0)&&(Dp(t.ma,e),Dp(t.ma,t.j),t.i.i.length=0,Ol(t.j),t.j.length=0),t.h.ya()}}function Bg(t,e,n){var r=n instanceof an?dt(n):new an(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ys(r,r.m);else{var i=v.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new an(null);r&&Qs(s,r),e&&(s.g=e),i&&Ys(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&L(r,n,e),L(r,"VER",t.ra),gi(t,r),r}function $g(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new $(new fi({ob:n})):new $(t.va),e.Oa(t.J),e}g.isActive=function(){return!!this.h&&this.h.isActive(this)};function qg(){}g=qg.prototype;g.Ba=function(){};g.Aa=function(){};g.za=function(){};g.ya=function(){};g.isActive=function(){return!0};g.Va=function(){};function Xs(){if(Fn&&!(10<=Number(C0)))throw Error("Environmental error: no available transport.")}Xs.prototype.g=function(t,e){return new Ie(t,e)};function Ie(t,e){J.call(this),this.g=new kg(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Zr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zr(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Bn(this)}X(Ie,J);Ie.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;de(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Bg(t,null,t.Y),mo(t)};Ie.prototype.close=function(){Yl(this.g)};Ie.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Bl(t),t=n);e.j.push(new J0(e.fb++,t)),e.H==3&&mo(e)};Ie.prototype.N=function(){this.g.h=null,delete this.j,Yl(this.g),delete this.g,Ie.$.N.call(this)};function jg(t){Wl.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}X(jg,Wl);function zg(){Gl.call(this),this.status=1}X(zg,Gl);function Bn(t){this.g=t}X(Bn,qg);Bn.prototype.Ba=function(){se(this.g,"a")};Bn.prototype.Aa=function(t){se(this.g,new jg(t))};Bn.prototype.za=function(t){se(this.g,new zg)};Bn.prototype.ya=function(){se(this.g,"b")};function lS(){this.blockSize=-1}function Le(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}X(Le,lS);Le.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function gl(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Le.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)gl(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){gl(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){gl(this,r),i=0;break}}this.h=i,this.i+=e};Le.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function D(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var uS={};function Zl(t){return-128<=t&&128>t?E0(t,function(e){return new D([e|0],0>e?-1:0)}):new D([t|0],0>t?-1:0)}function nt(t){if(isNaN(t)||!isFinite(t))return Vn;if(0>t)return ie(nt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Nl;return new D(e,0)}function Wg(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ie(Wg(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nt(Math.pow(e,8)),r=Vn,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=nt(Math.pow(e,s)),r=r.R(s).add(nt(o))):(r=r.R(n),r=r.add(nt(o)))}return r}var Nl=4294967296,Vn=Zl(0),Dl=Zl(1),$p=Zl(16777216);g=D.prototype;g.ea=function(){if(Pe(this))return-ie(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Nl+r)*e,e*=Nl}return t};g.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ht(this))return"0";if(Pe(this))return"-"+ie(this).toString(t);for(var e=nt(Math.pow(t,6)),n=this,r="";;){var i=eo(n,e).g;n=Zs(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ht(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};g.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ht(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Pe(t){return t.h==-1}g.X=function(t){return t=Zs(this,t),Pe(t)?-1:ht(t)?0:1};function ie(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new D(n,~t.h).add(Dl)}g.abs=function(){return Pe(this)?ie(this):this};g.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new D(n,n[n.length-1]&-2147483648?-1:0)};function Zs(t,e){return t.add(ie(e))}g.R=function(t){if(ht(this)||ht(t))return Vn;if(Pe(this))return Pe(t)?ie(this).R(ie(t)):ie(ie(this).R(t));if(Pe(t))return ie(this.R(ie(t)));if(0>this.X($p)&&0>t.X($p))return nt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Ks(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Ks(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ks(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ks(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new D(n,0)};function Ks(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Qr(t,e){this.g=t,this.h=e}function eo(t,e){if(ht(e))throw Error("division by zero");if(ht(t))return new Qr(Vn,Vn);if(Pe(t))return e=eo(ie(t),e),new Qr(ie(e.g),ie(e.h));if(Pe(e))return e=eo(t,ie(e)),new Qr(ie(e.g),e.h);if(30<t.g.length){if(Pe(t)||Pe(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Dl,r=e;0>=r.X(t);)n=qp(n),r=qp(r);var i=Mn(n,1),s=Mn(r,1);for(r=Mn(r,2),n=Mn(n,2);!ht(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Mn(r,1),n=Mn(n,1)}return e=Zs(t,i.R(e)),new Qr(i,e)}for(i=Vn;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=nt(n),o=s.R(e);Pe(o)||0<o.X(t);)n-=r,s=nt(n),o=s.R(e);ht(s)&&(s=Dl),i=i.add(s),t=Zs(t,o)}return new Qr(i,t)}g.gb=function(t){return eo(this,t).h};g.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new D(n,this.h&t.h)};g.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new D(n,this.h|t.h)};g.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new D(n,this.h^t.h)};function qp(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new D(n,t.h)}function Mn(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new D(i,t.h)}Xs.prototype.createWebChannel=Xs.prototype.g;Ie.prototype.send=Ie.prototype.u;Ie.prototype.open=Ie.prototype.m;Ie.prototype.close=Ie.prototype.close;co.NO_ERROR=0;co.TIMEOUT=8;co.HTTP_ERROR=6;cg.COMPLETE="complete";lg.EventType=ui;ui.OPEN="a";ui.CLOSE="b";ui.ERROR="c";ui.MESSAGE="d";J.prototype.listen=J.prototype.O;$.prototype.listenOnce=$.prototype.P;$.prototype.getLastError=$.prototype.Sa;$.prototype.getLastErrorCode=$.prototype.Ia;$.prototype.getStatus=$.prototype.da;$.prototype.getResponseJson=$.prototype.Wa;$.prototype.getResponseText=$.prototype.ja;$.prototype.send=$.prototype.ha;$.prototype.setWithCredentials=$.prototype.Oa;Le.prototype.digest=Le.prototype.l;Le.prototype.reset=Le.prototype.reset;Le.prototype.update=Le.prototype.j;D.prototype.add=D.prototype.add;D.prototype.multiply=D.prototype.R;D.prototype.modulo=D.prototype.gb;D.prototype.compare=D.prototype.X;D.prototype.toNumber=D.prototype.ea;D.prototype.toString=D.prototype.toString;D.prototype.getBits=D.prototype.D;D.fromNumber=nt;D.fromString=Wg;var hS=Ve.createWebChannelTransport=function(){return new Xs},dS=Ve.getStatEventTarget=function(){return ao()},fS=Ve.ErrorCode=co,pS=Ve.EventType=cg,gS=Ve.Event=cn,mS=Ve.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vP=Ve.FetchXmlHttpFactory=fi,_S=Ve.WebChannel=lg,yS=Ve.XhrIo=$,vS=Ve.Md5=Le,Gg=Ve.Integer=D;var Hg="@firebase/firestore";var Z=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Z.UNAUTHENTICATED=new Z(null),Z.GOOGLE_CREDENTIALS=new Z("google-credentials-uid"),Z.FIRST_PARTY=new Z("first-party-uid"),Z.MOCK_USER=new Z("mock-user");var mi="10.8.1";var qn=new Qe("@firebase/firestore");function Ee(t,...e){if(qn.logLevel<=b.DEBUG){let n=e.map(Iu);qn.debug(`Firestore (${mi}): ${t}`,...n)}}function wu(t,...e){if(qn.logLevel<=b.ERROR){let n=e.map(Iu);qn.error(`Firestore (${mi}): ${t}`,...n)}}function wS(t,...e){if(qn.logLevel<=b.WARN){let n=e.map(Iu);qn.warn(`Firestore (${mi}): ${t}`,...n)}}function Iu(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ge(t="Unexpected state"){let e=`FIRESTORE (${mi}) INTERNAL ASSERTION FAILED: `+t;throw wu(e),new Error(e)}function tu(t,e){t||ge()}var oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends we{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var _o=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},nu=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Z.UNAUTHENTICATED))}shutdown(){}},ru=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},iu=class{constructor(e){this.t=e,this.currentUser=Z.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>f(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tu(typeof r.accessToken=="string"),new _o(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return tu(e===null||typeof e=="string"),new Z(e)}},su=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Z.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ou=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new su(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Z.FIRST_PARTY))}shutdown(){}invalidateToken(){}},au=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cu=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tu(typeof n.token=="string"),this.R=n.token,new au(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function IS(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var lu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=IS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Jg(t,e){return t<e?-1:t>e?1:0}var uu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Dt=class t extends uu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var ln=class t{constructor(e){this.path=e}static fromPath(e){return new t(Dt.fromString(e))}static fromName(e){return new t(Dt.fromString(e).popFirst(5))}static empty(){return new t(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Dt(e.slice()))}};var hu=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};hu.UNKNOWN_ID=-1;function Xg(t){return t.name==="IndexedDbTransactionError"}function ES(t){return t===0&&1/t==-1/0}var TS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NP=[...TS,"documentOverlays"],SS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CS=SS,DP=[...CS,"indexConfiguration","indexState","indexEntries"];var jn=class t{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $n(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $n(this.root,e,this.comparator,!1)}getReverseIterator(){return new $n(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $n(this.root,e,this.comparator,!0)}},$n=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},it=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();let e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}};it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,i,s){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yo=class t{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vo(this.data.getIterator())}getIteratorFrom(e){return new vo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},vo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var du=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new du("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zn.EMPTY_BYTE_STRING=new zn("");var OP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kg(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function AS(t){return typeof t=="string"?zn.fromBase64String(t):zn.fromUint8Array(t)}var fu=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},pu=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function RS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var xP=new jn(ln.comparator);var MP=new jn(ln.comparator);var LP=new jn(ln.comparator),VP=new yo(ln.comparator);var FP=new yo(Jg);var Qg,C;(C=Qg||(Qg={}))[C.OK=0]="OK",C[C.CANCELLED=1]="CANCELLED",C[C.UNKNOWN=2]="UNKNOWN",C[C.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",C[C.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",C[C.NOT_FOUND=5]="NOT_FOUND",C[C.ALREADY_EXISTS=6]="ALREADY_EXISTS",C[C.PERMISSION_DENIED=7]="PERMISSION_DENIED",C[C.UNAUTHENTICATED=16]="UNAUTHENTICATED",C[C.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",C[C.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",C[C.ABORTED=10]="ABORTED",C[C.OUT_OF_RANGE=11]="OUT_OF_RANGE",C[C.UNIMPLEMENTED=12]="UNIMPLEMENTED",C[C.INTERNAL=13]="INTERNAL",C[C.UNAVAILABLE=14]="UNAVAILABLE",C[C.DATA_LOSS=15]="DATA_LOSS";var UP=new Gg([4294967295,4294967295],0);var wo=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Kg(e.integerValue));else if("doubleValue"in e){let r=Kg(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ES(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(AS(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?RS(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ge()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),ln.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};wo.bt=new wo;var BP=new Uint8Array(0);var rt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};rt.DEFAULT_COLLECTION_PERCENTILE=10,rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rt.DEFAULT=new rt(41943040,rt.DEFAULT_COLLECTION_PERCENTILE,rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rt.DISABLED=new rt(-1,0,0);function eu(){return typeof document<"u"?document:null}var gu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var mu=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bS(t,e){if(wu("AsyncQueue",`${e}: ${t}`),Xg(t))return new K(oe.UNAVAILABLE,`${e}: ${t}`);throw t}var _u=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Z.UNAUTHENTICATED,this.clientId=lu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>f(this,null,function*(){Ee("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>f(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=bS(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Zg(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Yg=new Map;function PS(t,e,n,r){if(e===!0&&r===!0)throw new K(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function NS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function DS(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=NS(t);throw new K(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Io=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Io({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Io(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nu;switch(r.type){case"firstParty":return new ou(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Yg.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),Yg.delete(n),r.terminate())}(this),Promise.resolve()}};function em(t,e,n,r={}){var i;let s=(t=DS(t,Eo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wS("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Z.MOCK_USER;else{a=gs(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new K(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Z(l)}t._authCredentials=new ru(new _o(a,c))}}var yu=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new gu(this,"async_queue_retry"),this._u=()=>{let n=eu();n&&Ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=eu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=eu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new kt;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return f(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Xg(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw wu("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=mu.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&ge()}verifyOperationInProgress(){}hu(){return f(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};var vu=class extends Eo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new yu}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||kS(this),this._firestoreClient.terminate()}};function tm(t,e){let n=typeof t=="object"?t:Et(),r=typeof t=="string"?t:e||"(default)",i=Jt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ps("firestore");s&&em(i,...s)}return i}function kS(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,u){return new fu(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Zg(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new _u(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var $P=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){mi=i})(Xe),Je(new pe("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new vu(new iu(r.getProvider("auth-internal")),new cu(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new K(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),U(Hg,"4.4.3",e),U(Hg,"4.4.3","esm2017")})();var _i=class{constructor(e){return e}},nm="firestore",Eu=class{constructor(){return Zt(nm)}};var Tu=new W("angularfire2.firestore-instances");function OS(t,e){let n=On(nm,t,e);return n&&new _i(n)}function xS(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new _i(r)}}var MS={provide:Eu,deps:[[new H,Tu]]},LS={provide:_i,useFactory:OS,deps:[[new H,Tu],Me]},VS=(()=>{class t{constructor(){U("angularfire",at.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qe({type:t});static \u0275inj=je({providers:[LS,MS]})}return t})();function rm(t,...e){return{ngModule:VS,providers:[{provide:Tu,useFactory:xS(t),multi:!0,deps:[q,ze,St,ct,[new H,rn],[new H,Tt],...e]}]}}var im=Ct(tm,!0);var sm="@firebase/database",om="1.0.3";var Ih="";function FS(t){Ih=t}var Du=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Y(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Dn(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ku=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ke(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Fm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Du(e)}}catch{}return new ku},hn=Fm("localStorage"),Ou=Fm("sessionStorage");var Kn=new Qe("@firebase/database"),US=function(){let t=1;return function(){return t++}}(),Um=function(t){let e=Pf(t),n=new ds;n.update(e);let r=n.digest();return fs.encodeByteArray(r)},Ni=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ni.apply(null,r):typeof r=="object"?e+=Y(r):e+=r,e+=" "}return e},dn=null,am=!0,BS=function(t,e){p(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Kn.logLevel=b.VERBOSE,dn=Kn.log.bind(Kn),e&&Ou.set("logging_enabled",!0)):typeof t=="function"?dn=t:(dn=null,Ou.remove("logging_enabled"))},le=function(...t){if(am===!0&&(am=!1,dn===null&&Ou.get("logging_enabled")===!0&&BS(!0)),dn){let e=Ni.apply(null,t);dn(e)}},Di=function(t){return function(...e){le(t,...e)}},xu=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ni(...t);Kn.error(e)},pt=function(...t){let e=`FIREBASE FATAL ERROR: ${Ni(...t)}`;throw Kn.error(e),new Error(e)},Te=function(...t){let e="FIREBASE WARNING: "+Ni(...t);Kn.warn(e)},$S=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Te("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},qS=function(t){if(He()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Yn="[MIN_NAME]",fn="[MAX_NAME]",rr=function(t,e){if(t===e)return 0;if(t===Yn||e===fn)return-1;if(e===Yn||t===fn)return 1;{let n=cm(t),r=cm(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},jS=function(t,e){return t===e?0:t<e?-1:1},yi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Y(e))},Eh=function(t){if(typeof t!="object"||t===null)return Y(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Y(e[r]),n+=":",n+=Eh(t[e[r]]);return n+="}",n},$m=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ke(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var qm=function(t){p(!Bm(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),h="";for(c=0;c<64;c+=8){let d=parseInt(u.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},zS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},WS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var GS=new RegExp("^-?(0*)\\d{1,10}$"),HS=-2147483648,KS=2147483647,cm=function(t){if(GS.test(t)){let e=Number(t);if(e>=HS&&e<=KS)return e}return null},ki=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Te("Exception was thrown by user callback.",n),e},Math.floor(0))}},QS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ti=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Mu=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Te(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Lu=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(le("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Te(e)}},Si=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),So="5",jm="v",zm="s",Wm="r",Gm="f",Hm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Km="ls",Qm="p",Vu="ac",Ym="websocket",Jm="long_polling";var Co=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function YS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Xm(t,e,n){p(typeof e=="string","typeof type must == string"),p(typeof n=="object","typeof params must == object");let r;if(e===Ym)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Jm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);YS(t)&&(n.ns=t.namespace);let i=[];return ke(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Fu=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ke(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return vf(this.counters_)}};var Su={},Cu={};function Th(t){let e=t.toString();return Su[e]||(Su[e]=new Fu),Su[e]}function JS(t,e){let n=t.toString();return Cu[n]||(Cu[n]=e()),Cu[n]}var Uu=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ki(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var lm="start",XS="close",ZS="pLPCommand",eC="pRTLPCB",Zm="id",e_="pw",t_="ser",tC="cb",nC="seg",rC="ts",iC="d",sC="dframe",n_=1870,r_=30,oC=n_-r_,aC=25e3,cC=3e4,Bu=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Di(e),this.stats_=Th(n),this.urlFn=c=>(this.appCheckToken&&(c[Vu]=this.appCheckToken),Xm(n,Jm,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Uu(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cC)),qS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $u((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===lm)this.id=a,this.password=c;else if(o===XS)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[lm]="t",r[t_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jm]=So,this.transportSessionId&&(r[zm]=this.transportSessionId),this.lastSessionId&&(r[Km]=this.lastSessionId),this.applicationId&&(r[Qm]=this.applicationId),this.appCheckToken&&(r[Vu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Hm.test(location.hostname)&&(r[Wm]=Gm);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return He()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zS()&&!WS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Y(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=cc(n),i=$m(r,oC);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(He())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[sC]="t",r[Zm]=e,r[e_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Y(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},$u=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,He())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=US(),window[ZS+this.uniqueCallbackIdentifier]=e,window[eC+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){le("frame writing exception"),a.stack&&le(a.stack),le(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||le("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Zm]=this.myID,e[e_]=this.myPW,e[t_]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+r_+r.length<=n_;){let o=this.pendingSegs.shift();r=r+"&"+nC+i+"="+o.seg+"&"+rC+i+"="+o.ts+"&"+iC+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(aC)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){He()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{le("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var lC=16384,uC=45e3,Ao=null;typeof MozWebSocket<"u"?Ao=MozWebSocket:typeof WebSocket<"u"&&(Ao=WebSocket);var vi=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Di(this.connId),this.stats_=Th(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[jm]=So,!He()&&typeof location<"u"&&location.hostname&&Hm.test(location.hostname)&&(a[Wm]=Gm),r&&(a[zm]=r),i&&(a[Km]=i),s&&(a[Vu]=s),o&&(a[Qm]=o),Xm(n,Ym,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hn.set("previous_websocket_failure",!0);try{let i;if(He()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${So}/${Ih}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ao(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ao!==null&&!t.forceDisallow_}static previouslyFailed(){return hn.isInMemoryStorage||hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){hn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Dn(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(p(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Y(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=$m(r,lC);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uC))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),hC=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Bu,vi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=vi&&vi.isAvailable(),i=r&&!vi.previouslyFailed();if(n.webSocketOnly&&(r||Te("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[vi];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),dC=6e4,fC=5e3,pC=10*1024,gC=100*1024,Au="t",um="d",mC="s",hm="r",_C="e",dm="o",fm="a",pm="n",gm="p",yC="h",qu=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Di("c:"+this.id+":"),this.transportManager_=new hC(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ti(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Au in e){let n=e[Au];n===fm?this.upgradeIfSecondaryHealthy_():n===hm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===dm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=yi("t",e),r=yi("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=yi("t",e),r=yi("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=yi(Au,e);if(um in e){let r=e[um];if(n===yC){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===pm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mC?this.onConnectionShutdown_(r):n===hm?this.onReset_(r):n===_C?xu("Server Error: "+r):n===dm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xu("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),So!==r&&Te("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ti(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ti(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gm,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ro=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var bo=class{constructor(e){this.allowedEvents_=e,this.listeners_={},p(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){p(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Po=class t extends bo{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Mr()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return p(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var mm=32,_m=768,O=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function k(){return new O("")}function A(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xt(t){return t.pieces_.length-t.pieceNum_}function V(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new O(t.pieces_,e)}function i_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function s_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function o_(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new O(e,0)}function ee(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof O)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new O(n,0)}function S(t){return t.pieceNum_>=t.pieces_.length}function Ne(t,e){let n=A(t),r=A(e);if(n===null)return e;if(n===r)return Ne(V(t),V(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function a_(t,e){if(xt(t)!==xt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ue(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xt(t)>xt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var ju=class{constructor(e,n){this.errorPrefix_=n,this.parts_=s_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Fr(this.parts_[r]);c_(this)}};function wC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Fr(e),c_(t)}function IC(t){let e=t.parts_.pop();t.byteLength_-=Fr(e),t.parts_.length>0&&(t.byteLength_-=1)}function c_(t){if(t.byteLength_>_m)throw new Error(t.errorPrefix_+"has a key path longer than "+_m+" bytes ("+t.byteLength_+").");if(t.parts_.length>mm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mm+") or object contains a cycle "+un(t))}function un(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var zu=class t extends bo{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return p(e==="visible","Unknown event type: "+e),[this.visible_]}};var wi=1e3,EC=60*5*1e3,ym=30*1e3,TC=1.3,SC=3e4,CC="server_kill",vm=3,Sh=(()=>{class t extends Ro{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Di("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wi,this.maxReconnectDelay_=EC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!He())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zu.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Po.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Y(o)),p(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new zt,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),p(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),p(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ke(n,"w")){let i=Gt(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Te(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Af(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ym)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=Cf(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),p(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Y(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):xu("Unrecognized action received from server: "+Y(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){p(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wi,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=wi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SC&&(this.reconnectDelay_=wi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TC)}this.onConnectStatus_(!1)}establishConnection_(){return f(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(d){p(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(d)};this.realtime_={close:l,sendRequest:u};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[d,m]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?le("getToken() completed but was canceled"):(le("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=m&&m.token,c=new qu(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,_=>{Te(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(CC)},o))}catch(d){this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&Te(d),l())}}})}interrupt(n){le("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){le("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Lr(this.interruptReasons_)&&(this.reconnectDelay_=wi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Eh(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new O(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){le("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=vm&&(this.reconnectDelay_=ym,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){le("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=vm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";He()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Ih.replace(/\./g,"-")]=1,Mr()?n["framework.cordova"]=1:ms()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Po.getInstance().currentlyOnline();return Lr(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),R=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Jn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new R(Yn,e),i=new R(Yn,n);return this.compare(r,i)!==0}minPost(){return R.MIN}};var To,No=class extends Jn{static get __EMPTY_NODE(){return To}static set __EMPTY_NODE(e){To=e}compare(e,n){return rr(e.name,n.name)}isDefinedOn(e){throw Wt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return R.MIN}maxPost(){return new R(fn,To)}makePost(e,n){return p(typeof e=="string","KeyIndex indexValue must always be a string."),new R(e,To)}toString(){return".key"}},Qn=new No;var Gn=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Fe=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??De.EMPTY_NODE,this.right=o??De.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return De.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return De.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Wu=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Fe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},De=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gn(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gn(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gn(this.root_,null,this.comparator_,!0,e)}};De.EMPTY_NODE=new Wu;function AC(t,e){return rr(t.name,e.name)}function Ch(t,e){return rr(t,e)}var Gu;function RC(t){Gu=t}var l_=function(t){return typeof t=="number"?"number:"+qm(t):"string:"+t},u_=function(t){if(t.isLeafNode()){let e=t.val();p(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ke(e,".sv"),"Priority must be a string or number.")}else p(t===Gu||t.isEmpty(),"priority of unexpected type.");p(t===Gu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var wm,Xn=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,p(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),u_(this.priorityNode_)}static set __childrenNodeConstructor(n){wm=n}static get __childrenNodeConstructor(){return wm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return S(n)?this:A(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=A(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(p(i!==".priority"||xt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(V(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+l_(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=qm(this.value_):n+=this.value_,this.lazyHash_=Um(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(p(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return p(s>=0,"Unknown leaf type: "+r),p(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),h_,d_;function bC(t){h_=t}function PC(t){d_=t}var Hu=class extends Jn{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?rr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return R.MIN}maxPost(){return new R(fn,new Xn("[PRIORITY-POST]",d_))}makePost(e,n){let r=h_(e);return new R(n,new Xn("[PRIORITY-POST]",r))}toString(){return".priority"}},he=new Hu;var NC=Math.log(2),Ku=class{constructor(e){let n=s=>parseInt(Math.log(s)/NC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Do=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,h,d;if(u===0)return null;if(u===1)return h=t[c],d=n?n(h):h,new Fe(d,h.node,Fe.BLACK,null,null);{let m=parseInt(u/2,10)+c,_=i(c,m),N=i(m+1,l);return h=t[m],d=n?n(h):h,new Fe(d,h.node,Fe.BLACK,_,N)}},s=function(c){let l=null,u=null,h=t.length,d=function(_,N){let j=h-_,fe=h;h-=_;let st=i(j+1,fe),Mt=t[j],Li=n?n(Mt):Mt;m(new Fe(Li,Mt.node,N,null,st))},m=function(_){l?(l.left=_,l=_):(u=_,l=_)};for(let _=0;_<c.count;++_){let N=c.nextBitIsOne(),j=Math.pow(2,c.count-(_+1));N?d(j,Fe.BLACK):(d(j,Fe.BLACK),d(j,Fe.RED))}return u},o=new Ku(t.length),a=s(o);return new De(r||e,a)};var Ru,Wn={},Zn=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return p(Wn&&he,"ChildrenNode.ts has not been loaded"),Ru=Ru||new t({".priority":Wn},{".priority":he}),Ru}get(e){let n=Gt(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof De?n:null}hasIndex(e){return Ke(this.indexSet_,e.toString())}addIndex(e,n){p(e!==Qn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(R.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Do(r,e.getCompare()):a=Wn;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Vr(this.indexes_,(i,s)=>{let o=Gt(this.indexSet_,s);if(p(o,"Missing index implementation for "+s),i===Wn)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(R.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Do(a,o.getCompare())}else return Wn;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new R(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Vr(this.indexes_,i=>{if(i===Wn)return i;{let s=n.get(e.name);return s?i.remove(new R(e.name,s)):i}});return new t(r,this.indexSet_)}};var Ii,B=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&u_(this.priorityNode_),this.children_.isEmpty()&&p(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ii||(Ii=new t(new De(Ch),null,Zn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ii}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ii:r}}getChild(n){let r=A(n);return r===null?this:this.getImmediateChild(r).getChild(V(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(p(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new R(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Ii:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=A(n);if(i===null)return r;{p(A(n)!==".priority"||xt(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(V(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(he,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+l_(this.getPriority().val())+":"),this.forEachChild(he,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Um(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new R(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new R(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new R(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,R.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,R.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Oi?-1:0}withIndex(n){if(n===Qn||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Qn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(he),s=r.getIterator(he),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Qn?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Qu=class extends B{constructor(){super(new De(Ch),B.EMPTY_NODE,Zn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return B.EMPTY_NODE}isEmpty(){return!1}},Oi=new Qu;Object.defineProperties(R,{MIN:{value:new R(Yn,B.EMPTY_NODE)},MAX:{value:new R(fn,Oi)}});No.__EMPTY_NODE=B.EMPTY_NODE;Xn.__childrenNodeConstructor=B;RC(Oi);PC(Oi);var DC=!0;function ue(t,e=null){if(t===null)return B.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),p(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Xn(n,ue(e))}if(!(t instanceof Array)&&DC){let n=[],r=!1;if(ke(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=ue(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new R(o,c)))}}),n.length===0)return B.EMPTY_NODE;let s=Do(n,AC,o=>o.name,Ch);if(r){let o=Do(n,he.getCompare());return new B(s,ue(e),new Zn({".priority":o},{".priority":he}))}else return new B(s,ue(e),Zn.Default)}else{let n=B.EMPTY_NODE;return ke(t,(r,i)=>{if(Ke(t,r)&&r.substring(0,1)!=="."){let s=ue(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ue(e))}}bC(ue);var Yu=class extends Jn{constructor(e){super(),this.indexPath_=e,p(!S(e)&&A(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?rr(e.name,n.name):s}makePost(e,n){let r=ue(e),i=B.EMPTY_NODE.updateChild(this.indexPath_,r);return new R(n,i)}maxPost(){let e=B.EMPTY_NODE.updateChild(this.indexPath_,Oi);return new R(fn,e)}toString(){return s_(this.indexPath_,0).join("/")}};var Ju=class extends Jn{compare(e,n){let r=e.node.compareTo(n.node);return r===0?rr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return R.MIN}maxPost(){return R.MAX}makePost(e,n){let r=ue(e);return new R(n,r)}toString(){return".value"}},kC=new Ju;function OC(t){return{type:"value",snapshotNode:t}}function xC(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function MC(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Im(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function LC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Xu=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=he}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return p(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return p(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yn}hasEnd(){return this.endSet_}getIndexEndValue(){return p(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return p(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return p(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===he}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Em(t){let e={};if(t.isDefault())return e;let n;if(t.index_===he?n="$priority":t.index_===kC?n="$value":t.index_===Qn?n="$key":(p(t.index_ instanceof Yu,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Y(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Y(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Y(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Y(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Y(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Tm(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==he&&(e.i=t.index_.toString()),e}var Zu=class t extends Ro{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Di("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(p(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=Em(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(s,h,!1,r),Gt(this.listens_,o)===a){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",i(d,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Em(e._queryParams),r=e._path.toString(),i=new zt;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Kt(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Dn(a.responseText)}catch{Te("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Te("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var eh=class{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ko(){return{value:null,children:new Map}}function f_(t,e,n){if(S(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=A(e);t.children.has(r)||t.children.set(r,ko());let i=t.children.get(r);e=V(e),f_(i,e,n)}}function th(t,e,n){t.value!==null?n(e,t.value):VC(t,(r,i)=>{let s=new O(e.toString()+"/"+r);th(i,s,n)})}function VC(t,e){t.children.forEach((n,r)=>{e(r,n)})}var nh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ke(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Sm=10*1e3,FC=30*1e3,UC=5*60*1e3,rh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new nh(e);let r=Sm+(FC-Sm)*Math.random();Ti(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;ke(e,(i,s)=>{s>0&&Ke(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ti(this.reportStats_.bind(this),Math.floor(Math.random()*2*UC))}};var ft=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(ft||{});function p_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function g_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function m_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ih=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ft.ACK_USER_WRITE,this.source=p_()}operationForChild(e){if(S(this.path)){if(this.affectedTree.value!=null)return p(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new O(e));return new t(k(),n,this.revert)}}else return p(A(this.path)===e,"operationForChild called for unrelated child."),new t(V(this.path),this.affectedTree,this.revert)}};var er=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ft.OVERWRITE}operationForChild(e){return S(this.path)?new t(this.source,k(),this.snap.getImmediateChild(e)):new t(this.source,V(this.path),this.snap)}};var Oo=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ft.MERGE}operationForChild(e){if(S(this.path)){let n=this.children.subtree(new O(e));return n.isEmpty()?null:n.value?new er(this.source,k(),n.value):new t(this.source,k(),n)}else return p(A(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,V(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ri=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(S(e))return this.isFullyInitialized()&&!this.filtered_;let n=A(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function BC(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(LC(o.childName,o.snapshotNode))}),Ei(t,i,"child_removed",e,r,n),Ei(t,i,"child_added",e,r,n),Ei(t,i,"child_moved",s,r,n),Ei(t,i,"child_changed",e,r,n),Ei(t,i,"value",e,r,n),i}function Ei(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>qC(t,a,c)),o.forEach(a=>{let c=$C(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function $C(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function qC(t,e,n){if(e.childName==null||n.childName==null)throw Wt("Should only compare child_ events.");let r=new R(e.childName,e.snapshotNode),i=new R(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function __(t,e){return{eventCache:t,serverCache:e}}function Ci(t,e,n,r){return __(new Ri(e,n,r),t.serverCache)}function y_(t,e,n,r){return __(t.eventCache,new Ri(e,n,r))}function sh(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function pn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var bu,jC=()=>(bu||(bu=new De(jS)),bu),me=class t{constructor(e,n=jC()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return ke(e,(r,i)=>{n=n.set(new O(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:k(),value:this.value};if(S(e))return null;{let r=A(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(V(e),n);return s!=null?{path:ee(new O(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(S(e))return this;{let n=A(e),r=this.children.get(n);return r!==null?r.subtree(V(e)):new t(null)}}set(e,n){if(S(e))return new t(n,this.children);{let r=A(e),s=(this.children.get(r)||new t(null)).set(V(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(S(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=A(e),r=this.children.get(n);if(r){let i=r.remove(V(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(S(e))return this.value;{let n=A(e),r=this.children.get(n);return r?r.get(V(e)):null}}setTree(e,n){if(S(e))return n;{let r=A(e),s=(this.children.get(r)||new t(null)).setTree(V(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(k(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ee(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,k(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(S(e))return null;{let s=A(e),o=this.children.get(s);return o?o.findOnPath_(V(e),ee(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,k(),n)}foreachOnPath_(e,n,r){if(S(e))return this;{this.value&&r(n,this.value);let i=A(e),s=this.children.get(i);return s?s.foreachOnPath_(V(e),ee(n,i),r):new t(null)}}foreach(e){this.foreach_(k(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ee(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Be=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new me(null))}};function Ai(t,e,n){if(S(e))return new Be(new me(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ne(i,e);return s=s.updateChild(o,n),new Be(t.writeTree_.set(i,s))}else{let i=new me(n),s=t.writeTree_.setTree(e,i);return new Be(s)}}}function Cm(t,e,n){let r=t;return ke(n,(i,s)=>{r=Ai(r,ee(e,i),s)}),r}function Am(t,e){if(S(e))return Be.empty();{let n=t.writeTree_.setTree(e,new me(null));return new Be(n)}}function oh(t,e){return gn(t,e)!=null}function gn(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ne(n.path,e)):null}function Rm(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(he,(r,i)=>{e.push(new R(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new R(r,i.value))}),e}function Ot(t,e){if(S(e))return t;{let n=gn(t,e);return n!=null?new Be(new me(n)):new Be(t.writeTree_.subtree(e))}}function ah(t){return t.writeTree_.isEmpty()}function tr(t,e){return v_(k(),t.writeTree_,e)}function v_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(p(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=v_(ee(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ee(t,".priority"),r)),n}}function w_(t,e){return C_(e,t)}function zC(t,e,n,r,i){p(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ai(t.visibleWrites,e,n)),t.lastWriteId=r}function WC(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function GC(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);p(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&HC(a,r.path)?i=!1:Ue(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return KC(t),!0;if(r.snap)t.visibleWrites=Am(t.visibleWrites,r.path);else{let a=r.children;ke(a,c=>{t.visibleWrites=Am(t.visibleWrites,ee(r.path,c))})}return!0}else return!1}function HC(t,e){if(t.snap)return Ue(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Ue(ee(t.path,n),e))return!0;return!1}function KC(t){t.visibleWrites=I_(t.allWrites,QC,k()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function QC(t){return t.visible}function I_(t,e,n){let r=Be.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Ue(n,o)?(a=Ne(n,o),r=Ai(r,a,s.snap)):Ue(o,n)&&(a=Ne(o,n),r=Ai(r,k(),s.snap.getChild(a)));else if(s.children){if(Ue(n,o))a=Ne(n,o),r=Cm(r,a,s.children);else if(Ue(o,n))if(a=Ne(o,n),S(a))r=Cm(r,k(),s.children);else{let c=Gt(s.children,A(a));if(c){let l=c.getChild(V(a));r=Ai(r,k(),l)}}}else throw Wt("WriteRecord should have .snap or .children")}}return r}function E_(t,e,n,r,i){if(!r&&!i){let s=gn(t.visibleWrites,e);if(s!=null)return s;{let o=Ot(t.visibleWrites,e);if(ah(o))return n;if(n==null&&!oh(o,k()))return null;{let a=n||B.EMPTY_NODE;return tr(o,a)}}}else{let s=Ot(t.visibleWrites,e);if(!i&&ah(s))return n;if(!i&&n==null&&!oh(s,k()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ue(l.path,e)||Ue(e,l.path))},a=I_(t.allWrites,o,e),c=n||B.EMPTY_NODE;return tr(a,c)}}}function YC(t,e,n){let r=B.EMPTY_NODE,i=gn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(he,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ot(t.visibleWrites,e);return n.forEachChild(he,(o,a)=>{let c=tr(Ot(s,new O(o)),a);r=r.updateImmediateChild(o,c)}),Rm(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ot(t.visibleWrites,e);return Rm(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function JC(t,e,n,r,i){p(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ee(e,n);if(oh(t.visibleWrites,s))return null;{let o=Ot(t.visibleWrites,s);return ah(o)?i.getChild(n):tr(o,i.getChild(n))}}function XC(t,e,n,r){let i=ee(e,n),s=gn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ot(t.visibleWrites,i);return tr(o,r.getNode().getImmediateChild(n))}else return null}function ZC(t,e){return gn(t.visibleWrites,e)}function eA(t,e,n,r,i,s,o){let a,c=Ot(t.visibleWrites,e),l=gn(c,k());if(l!=null)a=l;else if(n!=null)a=tr(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),m=d.getNext();for(;m&&u.length<i;)h(m,r)!==0&&u.push(m),m=d.getNext();return u}else return[]}function tA(){return{visibleWrites:Be.empty(),allWrites:[],lastWriteId:-1}}function ch(t,e,n,r){return E_(t.writeTree,t.treePath,e,n,r)}function T_(t,e){return YC(t.writeTree,t.treePath,e)}function bm(t,e,n,r){return JC(t.writeTree,t.treePath,e,n,r)}function xo(t,e){return ZC(t.writeTree,ee(t.treePath,e))}function nA(t,e,n,r,i,s){return eA(t.writeTree,t.treePath,e,n,r,i,s)}function Ah(t,e,n){return XC(t.writeTree,t.treePath,e,n)}function S_(t,e){return C_(ee(t.treePath,e),t.writeTree)}function C_(t,e){return{treePath:t,writeTree:e}}var lh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;p(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),p(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Im(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,MC(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,xC(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Im(r,e.snapshotNode,i.oldSnap));else throw Wt("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var uh=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},A_=new uh,bi=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ri(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ah(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pn(this.viewCache_),s=nA(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function rA(t,e){p(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),p(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function iA(t,e,n,r,i){let s=new lh,o,a;if(n.type===ft.OVERWRITE){let l=n;l.source.fromUser?o=hh(t,e,l.path,l.snap,r,i,s):(p(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!S(l.path),o=Mo(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===ft.MERGE){let l=n;l.source.fromUser?o=oA(t,e,l.path,l.children,r,i,s):(p(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=dh(t,e,l.path,l.children,r,i,a,s))}else if(n.type===ft.ACK_USER_WRITE){let l=n;l.revert?o=lA(t,e,l.path,r,i,s):o=aA(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===ft.LISTEN_COMPLETE)o=cA(t,e,n.path,r,s);else throw Wt("Unknown operation type: "+n.type);let c=s.getChanges();return sA(e,o,c),{viewCache:o,changes:c}}function sA(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=sh(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(OC(sh(e)))}}function R_(t,e,n,r,i,s){let o=e.eventCache;if(xo(r,n)!=null)return e;{let a,c;if(S(n))if(p(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=pn(e),u=l instanceof B?l:B.EMPTY_NODE,h=T_(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{let l=ch(r,pn(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=A(n);if(l===".priority"){p(xt(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let h=bm(r,n,u,c);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{let u=V(n),h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let d=bm(r,n,o.getNode(),c);d!=null?h=o.getNode().getImmediateChild(l).updateChild(u,d):h=o.getNode().getImmediateChild(l)}else h=Ah(r,l,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),l,h,u,i,s):a=o.getNode()}}return Ci(e,a,o.isFullyInitialized()||S(n),t.filter.filtersNodes())}}function Mo(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(S(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),m,null)}else{let m=A(n);if(!c.isCompleteForPath(n)&&xt(n)>1)return e;let _=V(n),j=c.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?l=u.updatePriority(c.getNode(),j):l=u.updateChild(c.getNode(),m,j,_,A_,null)}let h=y_(e,l,c.isFullyInitialized()||S(n),u.filtersNodes()),d=new bi(i,h,s);return R_(t,h,n,i,d,a)}function hh(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new bi(i,e,s);if(S(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ci(e,l,!0,t.filter.filtersNodes());else{let h=A(n);if(h===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ci(e,l,a.isFullyInitialized(),a.isFiltered());else{let d=V(n),m=a.getNode().getImmediateChild(h),_;if(S(d))_=r;else{let N=u.getCompleteChild(h);N!=null?i_(d)===".priority"&&N.getChild(o_(d)).isEmpty()?_=N:_=N.updateChild(d,r):_=B.EMPTY_NODE}if(m.equals(_))c=e;else{let N=t.filter.updateChild(a.getNode(),h,_,d,u,o);c=Ci(e,N,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Pm(t,e){return t.eventCache.isCompleteForChild(e)}function oA(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=ee(n,c);Pm(e,A(u))&&(a=hh(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=ee(n,c);Pm(e,A(u))||(a=hh(t,a,u,l,i,s,o))}),a}function Nm(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dh(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;S(n)?l=r:l=new me(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){let m=e.serverCache.getNode().getImmediateChild(h),_=Nm(t,m,d);c=Mo(t,c,new O(h),_,i,s,o,a)}}),l.children.inorderTraversal((h,d)=>{let m=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!m){let _=e.serverCache.getNode().getImmediateChild(h),N=Nm(t,_,d);c=Mo(t,c,new O(h),N,i,s,o,a)}}),c}function aA(t,e,n,r,i,s,o){if(xo(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(S(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Mo(t,e,n,c.getNode().getChild(n),i,s,a,o);if(S(n)){let l=new me(null);return c.getNode().forEachChild(Qn,(u,h)=>{l=l.set(new O(u),h)}),dh(t,e,n,l,i,s,a,o)}else return e}else{let l=new me(null);return r.foreach((u,h)=>{let d=ee(n,u);c.isCompleteForPath(d)&&(l=l.set(u,c.getNode().getChild(d)))}),dh(t,e,n,l,i,s,a,o)}}function cA(t,e,n,r,i){let s=e.serverCache,o=y_(e,s.getNode(),s.isFullyInitialized()||S(n),s.isFiltered());return R_(t,o,n,r,A_,i)}function lA(t,e,n,r,i,s){let o;if(xo(r,n)!=null)return e;{let a=new bi(r,e,i),c=e.eventCache.getNode(),l;if(S(n)||A(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=ch(r,pn(e));else{let h=e.serverCache.getNode();p(h instanceof B,"serverChildren would be complete if leaf node"),u=T_(r,h)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=A(n),h=Ah(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=t.filter.updateChild(c,u,h,V(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,B.EMPTY_NODE,V(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ch(r,pn(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||xo(r,k())!=null,Ci(e,l,o,t.filter.filtersNodes())}}function uA(t,e){let n=pn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!S(e)&&!n.getImmediateChild(A(e)).isEmpty())?n.getChild(e):null}function Dm(t,e,n,r){e.type===ft.MERGE&&e.source.queryId!==null&&(p(pn(t.viewCache_),"We should always have a full cache before handling merges"),p(sh(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=iA(t.processor_,i,e,n,r);return rA(t.processor_,s.viewCache),p(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,hA(t,s.changes,s.viewCache.eventCache.getNode(),null)}function hA(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return BC(t.eventGenerator_,e,n,i)}var km;function dA(t){p(!km,"__referenceConstructor has already been defined"),km=t}function Rh(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return p(s!=null,"SyncTree gave us an op for an invalid query."),Dm(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Dm(o,e,n,r));return s}}function bh(t,e){let n=null;for(let r of t.views.values())n=n||uA(r,e);return n}var Om;function fA(t){p(!Om,"__referenceConstructor has already been defined"),Om=t}var Lo=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new me(null),this.pendingWriteTree_=tA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function pA(t,e,n,r,i){return zC(t.pendingWriteTree_,e,n,r,i),i?Fo(t,new er(p_(),e,n)):[]}function Hn(t,e,n=!1){let r=WC(t.pendingWriteTree_,e);if(GC(t.pendingWriteTree_,e)){let s=new me(null);return r.snap!=null?s=s.set(k(),!0):ke(r.children,o=>{s=s.set(new O(o),!0)}),Fo(t,new ih(r.path,s,n))}else return[]}function Vo(t,e,n){return Fo(t,new er(g_(),e,n))}function gA(t,e,n){let r=me.fromObject(n);return Fo(t,new Oo(g_(),e,r))}function mA(t,e,n,r){let i=D_(t,r);if(i!=null){let s=k_(i),o=s.path,a=s.queryId,c=Ne(o,e),l=new er(m_(a),c,n);return O_(t,o,l)}else return[]}function _A(t,e,n,r){let i=D_(t,r);if(i){let s=k_(i),o=s.path,a=s.queryId,c=Ne(o,e),l=me.fromObject(n),u=new Oo(m_(a),c,l);return O_(t,o,u)}else return[]}function b_(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ne(o,e),l=bh(a,c);if(l)return l});return E_(i,e,s,n,!0)}function Fo(t,e){return P_(e,t.syncPointTree_,null,w_(t.pendingWriteTree_,k()))}function P_(t,e,n,r){if(S(t.path))return N_(t,e,n,r);{let i=e.get(k());n==null&&i!=null&&(n=bh(i,k()));let s=[],o=A(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=S_(r,o);s=s.concat(P_(a,c,l,u))}return i&&(s=s.concat(Rh(i,t,r,n))),s}}function N_(t,e,n,r){let i=e.get(k());n==null&&i!=null&&(n=bh(i,k()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=S_(r,o),u=t.operationForChild(o);u&&(s=s.concat(N_(u,a,c,l)))}),i&&(s=s.concat(Rh(i,t,r,n))),s}function D_(t,e){return t.tagToQueryMap.get(e)}function k_(t){let e=t.indexOf("$");return p(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new O(t.substr(0,e))}}function O_(t,e,n){let r=t.syncPointTree_.get(e);p(r,"Missing sync point for query tag that we're tracking");let i=w_(t.pendingWriteTree_,e);return Rh(r,n,i,null)}var fh=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ph=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ee(this.path_,e);return new t(this.syncTree_,n)}node(){return b_(this.syncTree_,this.path_)}},yA=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xm=function(t,e,n){if(!t||typeof t!="object")return t;if(p(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return vA(t[".sv"],e,n);if(typeof t[".sv"]=="object")return wA(t[".sv"],e);p(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},vA=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:p(!1,"Unexpected server value: "+t)}},wA=function(t,e,n){t.hasOwnProperty("increment")||p(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&p(!1,"Unexpected increment value: "+r);let i=e.node();if(p(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},IA=function(t,e,n,r){return Ph(e,new ph(n,t),r)},EA=function(t,e,n){return Ph(t,new fh(e),n)};function Ph(t,e,n){let r=t.getPriority().val(),i=xm(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=xm(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Xn(a,ue(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Xn(i))),o.forEachChild(he,(a,c)=>{let l=Ph(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Pi=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Nh(t,e){let n=e instanceof O?e:new O(e),r=t,i=A(n);for(;i!==null;){let s=Gt(r.node.children,i)||{children:{},childCount:0};r=new Pi(i,r,s),n=V(n),i=A(n)}return r}function ir(t){return t.node.value}function x_(t,e){t.node.value=e,gh(t)}function M_(t){return t.node.childCount>0}function TA(t){return ir(t)===void 0&&!M_(t)}function Uo(t,e){ke(t.node.children,(n,r)=>{e(new Pi(n,t,r))})}function L_(t,e,n,r){n&&!r&&e(t),Uo(t,i=>{L_(i,e,!0,r)}),n&&r&&e(t)}function SA(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xi(t){return new O(t.parent===null?t.name:xi(t.parent)+"/"+t.name)}function gh(t){t.parent!==null&&CA(t.parent,t.name,t)}function CA(t,e,n){let r=TA(n),i=Ke(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,gh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,gh(t))}var AA=/[\[\].#$\/\u0000-\u001F\u007F]/,RA=/[\[\].#$\u0000-\u001F\u007F]/,Pu=10*1024*1024,V_=function(t){return typeof t=="string"&&t.length!==0&&!AA.test(t)},bA=function(t){return typeof t=="string"&&t.length!==0&&!RA.test(t)},PA=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bA(t)};var F_=function(t,e,n){let r=n instanceof O?new ju(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+un(r));if(typeof e=="function")throw new Error(t+"contains a function "+un(r)+" with contents = "+e.toString());if(Bm(e))throw new Error(t+"contains "+e.toString()+" "+un(r));if(typeof e=="string"&&e.length>Pu/3&&Fr(e)>Pu)throw new Error(t+"contains a string greater than "+Pu+" utf8 bytes "+un(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ke(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!V_(o)))throw new Error(t+" contains an invalid key ("+o+") "+un(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wC(r,o),F_(t,a,r),IC(r)}),i&&s)throw new Error(t+' contains ".value" child '+un(r)+" in addition to actual children.")}};var NA=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!V_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!PA(n))throw new Error(bf(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var mh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function DA(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!a_(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function mn(t,e,n){DA(t,n),kA(t,r=>Ue(r,e)||Ue(e,r))}function kA(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(OA(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function OA(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();dn&&le("event: "+n.toString()),ki(r)}}}var xA="repo_interrupt",MA=25,_h=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ko(),this.transactionQueueTree_=new Pi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function LA(t,e,n){if(t.stats_=Th(t.repoInfo_),t.forceRestClient_||QS())t.server_=new Zu(t.repoInfo_,(r,i,s,o)=>{Mm(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Lm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Y(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Sh(t.repoInfo_,e,(r,i,s,o)=>{Mm(t,r,i,s,o)},r=>{Lm(t,r)},r=>{FA(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=JS(t.repoInfo_,()=>new rh(t.stats_,t.server_)),t.infoData_=new eh,t.infoSyncTree_=new Lo({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Vo(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Dh(t,"connected",!1),t.serverSyncTree_=new Lo({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);mn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function VA(t){let n=t.infoData_.getNode(new O(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function U_(t){return yA({timestamp:VA(t)})}function Mm(t,e,n,r,i){t.dataUpdateCount++;let s=new O(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Vr(n,l=>ue(l));o=_A(t.serverSyncTree_,s,c,i)}else{let c=ue(n);o=mA(t.serverSyncTree_,s,c,i)}else if(r){let c=Vr(n,l=>ue(l));o=gA(t.serverSyncTree_,s,c)}else{let c=ue(n);o=Vo(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Oh(t,s)),mn(t.eventQueue_,a,o)}function Lm(t,e){Dh(t,"connected",e),e===!1&&BA(t)}function FA(t,e){ke(e,(n,r)=>{Dh(t,n,r)})}function Dh(t,e,n){let r=new O("/.info/"+e),i=ue(n);t.infoData_.updateSnapshot(r,i);let s=Vo(t.infoSyncTree_,r,i);mn(t.eventQueue_,r,s)}function UA(t){return t.nextWriteId_++}function BA(t){B_(t,"onDisconnectEvents");let e=U_(t),n=ko();th(t.onDisconnect_,k(),(i,s)=>{let o=IA(i,s,t.serverSyncTree_,e);f_(n,i,o)});let r=[];th(n,k(),(i,s)=>{r=r.concat(Vo(t.serverSyncTree_,i,s));let o=zA(t,i);Oh(t,o)}),t.onDisconnect_=ko(),mn(t.eventQueue_,k(),r)}function $A(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xA)}function B_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),le(n,...e)}function $_(t,e,n){return b_(t.serverSyncTree_,e,n)||B.EMPTY_NODE}function kh(t,e=t.transactionQueueTree_){if(e||Bo(t,e),ir(e)){let n=j_(t,e);p(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&qA(t,xi(e),n)}else M_(e)&&Uo(e,n=>{kh(t,n)})}function qA(t,e,n){let r=n.map(l=>l.currentWriteId),i=$_(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];p(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let h=Ne(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{B_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Hn(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Bo(t,Nh(t.transactionQueueTree_,e)),kh(t,t.transactionQueueTree_),mn(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)ki(h[d])}else{if(l==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Te("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=l}Oh(t,e)}},o)}function Oh(t,e){let n=q_(t,e),r=xi(n),i=j_(t,n);return jA(t,i,r),r}function jA(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ne(n,c.path),u=!1,h;if(p(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,i=i.concat(Hn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=MA)u=!0,h="maxretry",i=i.concat(Hn(t.serverSyncTree_,c.currentWriteId,!0));else{let d=$_(t,c.path,o);c.currentInputSnapshot=d;let m=e[a].update(d.val());if(m!==void 0){F_("transaction failed: Data returned ",m,c.path);let _=ue(m);typeof m=="object"&&m!=null&&Ke(m,".priority")||(_=_.updatePriority(d.getPriority()));let j=c.currentWriteId,fe=U_(t),st=EA(_,d,fe);c.currentOutputSnapshotRaw=_,c.currentOutputSnapshotResolved=st,c.currentWriteId=UA(t),o.splice(o.indexOf(j),1),i=i.concat(pA(t.serverSyncTree_,c.path,st,c.currentWriteId,c.applyLocally)),i=i.concat(Hn(t.serverSyncTree_,j,!0))}else u=!0,h="nodata",i=i.concat(Hn(t.serverSyncTree_,c.currentWriteId,!0))}mn(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Bo(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ki(r[a]);kh(t,t.transactionQueueTree_)}function q_(t,e){let n,r=t.transactionQueueTree_;for(n=A(e);n!==null&&ir(r)===void 0;)r=Nh(r,n),e=V(e),n=A(e);return r}function j_(t,e){let n=[];return z_(t,e,n),n.sort((r,i)=>r.order-i.order),n}function z_(t,e,n){let r=ir(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Uo(e,i=>{z_(t,i,n)})}function Bo(t,e){let n=ir(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,x_(e,n.length>0?n:void 0)}Uo(e,r=>{Bo(t,r)})}function zA(t,e){let n=xi(q_(t,e)),r=Nh(t.transactionQueueTree_,e);return SA(r,i=>{Nu(t,i)}),Nu(t,r),L_(r,i=>{Nu(t,i)}),n}function Nu(t,e){let n=ir(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(p(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(p(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Hn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?x_(e,void 0):n.length=s+1,mn(t.eventQueue_,xi(e),i);for(let o=0;o<r.length;o++)ki(r[o])}}function WA(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function GA(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Te(`Invalid query segment '${n}' in query '${t}'`)}return e}var Vm=function(t,e){let n=HA(t),r=n.namespace;n.domain==="firebase.com"&&pt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$S();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Co(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new O(n.pathString)}},HA=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=WA(t.substring(u,h)));let d=GA(t.substring(Math.min(t.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let m=e.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{let _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var yh=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return S(this._path)?null:i_(this._path)}get ref(){return new nr(this._repo,this._path)}get _queryIdentifier(){let e=Tm(this._queryParams),n=Eh(e);return n==="{}"?"default":n}get _queryObject(){return Tm(this._queryParams)}isEqual(e){if(e=xe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=a_(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+vC(this._path)}};var nr=class t extends yh{constructor(e,n){super(e,n,new Xu,!1)}get parent(){let e=o_(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};dA(nr);fA(nr);var KA="FIREBASE_DATABASE_EMULATOR_HOST",vh={},QA=!1;function YA(t,e,n,r){t.repoInfo_=new Co(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function JA(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),le("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Vm(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[KA]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=Vm(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Si(Si.OWNER):new Lu(t.name,t.options,e);NA("Invalid Firebase Database URL",o),S(o.path)||pt("Database URL must point to the root of a Firebase Database (not including a child path).");let h=ZA(a,t,u,new Mu(t.name,n));return new wh(h,t)}function XA(t,e){let n=vh[e];(!n||n[t.key]!==t)&&pt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$A(t),delete n[t.key]}function ZA(t,e,n,r){let i=vh[e.name];i||(i={},vh[e.name]=i);let s=i[t.toURLString()];return s&&pt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _h(t,QA,n,r),i[t.toURLString()]=s,s}var wh=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(LA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nr(this._repo,k())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pt("Cannot call "+e+" on a deleted database.")}};function W_(t=Et(),e){let n=Jt(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=ps("database");r&&G_(n,...r)}return n}function G_(t,e,n,r={}){t=xe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Si(Si.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:gs(r.mockUserToken,t.app.options.projectId);s=new Si(o)}YA(i,e,n,s)}function eR(t){FS(Xe),Je(new pe("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return JA(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),U(sm,om,t),U(sm,om,"esm2017")}Sh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Sh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eR();var Mi=class{constructor(e){return e}},H_="database",xh=class{constructor(){return Zt(H_)}};var Mh=new W("angularfire2.database-instances");function tR(t,e){let n=On(H_,t,e);return n&&new Mi(n)}function nR(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Mi(r)}}var rR={provide:xh,deps:[[new H,Mh]]},iR={provide:Mi,useFactory:tR,deps:[[new H,Mh],Me]},sR=(()=>{class t{constructor(){U("angularfire",at.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qe({type:t});static \u0275inj=je({providers:[iR,rR]})}return t})();function K_(t,...e){return{ngModule:sR,providers:[{provide:Mh,useFactory:nR(t),multi:!0,deps:[q,ze,St,ct,[new H,rn],[new H,Tt],...e]}]}}var Q_=Ct(W_,!0);var oR="@",aR=(()=>{let e=class e{constructor(r,i,s,o,a){this.doc=r,this.delegate=i,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=E(sd,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-TYH5474W.js")).catch(i=>{throw new z(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(r,i){let s=this.delegate.createRenderer(r,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Lh(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(r,i);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(i){ia()},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),Lh=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,r,i){this.delegate.insertBefore(e,n,r,i)}removeChild(e,n,r){this.delegate.removeChild(e,n,r)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(e,n,r)),this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(e,n,r)),this.delegate.listen(e,n,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(oR)}};function Y_(t="animations"){return od("NgAsyncAnimations"),ur([{provide:$i,useFactory:(e,n,r)=>new aR(e,n,r,t),deps:[Ae,Ki,q]},{provide:td,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var J_={providers:[gf(mf),hr(jf(()=>zf({projectId:"jb-medico-5814e",appId:"1:409321240880:web:21cb486bc142a72c0470f5",storageBucket:"jb-medico-5814e.appspot.com",apiKey:"AIzaSyDbHna2OEyN5NCgVpMhH0LJIisQ6xiiGoA",authDomain:"jb-medico-5814e.firebaseapp.com",messagingSenderId:"409321240880"}))),hr(Pp(()=>Np())),hr(rm(()=>im())),hr(K_(()=>Q_())),Y_()]};var cR=(t,e)=>e.title;function lR(t,e){if(t&1&&(ne(0,"a",31)(1,"span"),qi(2),_e(),wn(),ne(3,"svg",32),ye(4,"path",33),_e()()),t&2){let n=e.$implicit;hd("href",n.link,id),Bi(2),pd(n.title)}}var uR=()=>({title:"Explore the Docs",link:"https://angular.dev"}),hR=()=>({title:"Learn with Tutorials",link:"https://angular.dev/tutorials"}),dR=()=>({title:"CLI Docs",link:"https://angular.dev/tools/cli"}),fR=()=>({title:"Angular Language Service",link:"https://angular.dev/tools/language-service"}),pR=()=>({title:"Angular DevTools",link:"https://angular.dev/tools/devtools"}),gR=(t,e,n,r,i)=>[t,e,n,r,i],X_=(()=>{let e=class e{constructor(){this.title="jbmedicofr"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fi({type:e,selectors:[["app-root"]],standalone:!0,features:[ji],decls:39,vars:12,consts:[[1,"main"],[1,"content"],[1,"left-side"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 982 239","fill","none",1,"angular-logo"],["clip-path","url(#a)"],["fill","url(#b)","d","M388.676 191.625h30.849L363.31 31.828h-35.758l-56.215 159.797h30.848l13.174-39.356h60.061l13.256 39.356Zm-65.461-62.675 21.602-64.311h1.227l21.602 64.311h-44.431Zm126.831-7.527v70.202h-28.23V71.839h27.002v20.374h1.392c2.782-6.71 7.2-12.028 13.255-15.956 6.056-3.927 13.584-5.89 22.503-5.89 8.264 0 15.465 1.8 21.684 5.318 6.137 3.518 10.964 8.673 14.319 15.382 3.437 6.71 5.074 14.81 4.992 24.383v76.175h-28.23v-71.92c0-8.019-2.046-14.237-6.219-18.819-4.173-4.5-9.819-6.791-17.102-6.791-4.91 0-9.328 1.063-13.174 3.272-3.846 2.128-6.792 5.237-9.001 9.328-2.046 4.009-3.191 8.918-3.191 14.728ZM589.233 239c-10.147 0-18.82-1.391-26.103-4.091-7.282-2.7-13.092-6.382-17.511-10.964-4.418-4.582-7.528-9.655-9.164-15.219l25.448-6.136c1.145 2.372 2.782 4.663 4.991 6.954 2.209 2.291 5.155 4.255 8.837 5.81 3.683 1.554 8.428 2.291 14.074 2.291 8.019 0 14.647-1.964 19.884-5.81 5.237-3.845 7.856-10.227 7.856-19.064v-22.665h-1.391c-1.473 2.946-3.601 5.892-6.383 9.001-2.782 3.109-6.464 5.645-10.965 7.691-4.582 2.046-10.228 3.109-17.101 3.109-9.165 0-17.511-2.209-25.039-6.545-7.446-4.337-13.42-10.883-17.757-19.474-4.418-8.673-6.628-19.473-6.628-32.565 0-13.091 2.21-24.301 6.628-33.383 4.419-9.082 10.311-15.955 17.839-20.7 7.528-4.746 15.874-7.037 25.039-7.037 7.037 0 12.846 1.145 17.347 3.518 4.582 2.373 8.182 5.236 10.883 8.51 2.7 3.272 4.746 6.382 6.137 9.327h1.554v-19.8h27.821v121.749c0 10.228-2.454 18.737-7.364 25.447-4.91 6.709-11.538 11.7-20.048 15.055-8.509 3.355-18.165 4.991-28.884 4.991Zm.245-71.266c5.974 0 11.047-1.473 15.302-4.337 4.173-2.945 7.446-7.118 9.573-12.519 2.21-5.482 3.274-12.027 3.274-19.637 0-7.609-1.064-14.155-3.274-19.8-2.127-5.646-5.318-10.064-9.491-13.255-4.174-3.11-9.329-4.746-15.384-4.746s-11.537 1.636-15.792 4.91c-4.173 3.272-7.365 7.772-9.492 13.418-2.128 5.727-3.191 12.191-3.191 19.392 0 7.2 1.063 13.745 3.273 19.228 2.127 5.482 5.318 9.736 9.573 12.764 4.174 3.027 9.41 4.582 15.629 4.582Zm141.56-26.51V71.839h28.23v119.786h-27.412v-21.273h-1.227c-2.7 6.709-7.119 12.191-13.338 16.446-6.137 4.255-13.747 6.382-22.748 6.382-7.855 0-14.81-1.718-20.783-5.237-5.974-3.518-10.72-8.591-14.075-15.382-3.355-6.709-5.073-14.891-5.073-24.464V71.839h28.312v71.921c0 7.609 2.046 13.664 6.219 18.083 4.173 4.5 9.655 6.709 16.365 6.709 4.173 0 8.183-.982 12.111-3.028 3.927-2.045 7.118-5.072 9.655-9.082 2.537-4.091 3.764-9.164 3.764-15.218Zm65.707-109.395v159.796h-28.23V31.828h28.23Zm44.841 162.169c-7.61 0-14.402-1.391-20.457-4.091-6.055-2.7-10.883-6.791-14.32-12.109-3.518-5.319-5.237-11.946-5.237-19.801 0-6.791 1.228-12.355 3.765-16.773 2.536-4.419 5.891-7.937 10.228-10.637 4.337-2.618 9.164-4.664 14.647-6.055 5.4-1.391 11.046-2.373 16.856-3.027 7.037-.737 12.683-1.391 17.102-1.964 4.337-.573 7.528-1.555 9.574-2.782 1.963-1.309 3.027-3.273 3.027-5.973v-.491c0-5.891-1.718-10.391-5.237-13.664-3.518-3.191-8.51-4.828-15.056-4.828-6.955 0-12.356 1.473-16.447 4.5-4.009 3.028-6.71 6.546-8.183 10.719l-26.348-3.764c2.046-7.282 5.483-13.336 10.31-18.328 4.746-4.909 10.638-8.59 17.511-11.045 6.955-2.455 14.565-3.682 22.912-3.682 5.809 0 11.537.654 17.265 2.045s10.965 3.6 15.711 6.71c4.746 3.109 8.51 7.282 11.455 12.6 2.864 5.318 4.337 11.946 4.337 19.883v80.184h-27.166v-16.446h-.9c-1.719 3.355-4.092 6.464-7.201 9.328-3.109 2.864-6.955 5.237-11.619 6.955-4.828 1.718-10.229 2.536-16.529 2.536Zm7.364-20.701c5.646 0 10.556-1.145 14.729-3.354 4.173-2.291 7.364-5.237 9.655-9.001 2.292-3.763 3.355-7.854 3.355-12.273v-14.155c-.9.737-2.373 1.391-4.5 2.046-2.128.654-4.419 1.145-7.037 1.636-2.619.491-5.155.9-7.692 1.227-2.537.328-4.746.655-6.628.901-4.173.572-8.019 1.472-11.292 2.781-3.355 1.31-5.973 3.11-7.855 5.401-1.964 2.291-2.864 5.318-2.864 8.918 0 5.237 1.882 9.164 5.728 11.782 3.682 2.782 8.51 4.091 14.401 4.091Zm64.643 18.328V71.839h27.412v19.965h1.227c2.21-6.955 5.974-12.274 11.292-16.038 5.319-3.763 11.456-5.645 18.329-5.645 1.555 0 3.355.082 5.237.163 1.964.164 3.601.328 4.91.573v25.938c-1.227-.41-3.109-.819-5.646-1.146a58.814 58.814 0 0 0-7.446-.49c-5.155 0-9.738 1.145-13.829 3.354-4.091 2.209-7.282 5.236-9.655 9.164-2.373 3.927-3.519 8.427-3.519 13.5v70.448h-28.312ZM222.077 39.192l-8.019 125.923L137.387 0l84.69 39.192Zm-53.105 162.825-57.933 33.056-57.934-33.056 11.783-28.556h92.301l11.783 28.556ZM111.039 62.675l30.357 73.803H80.681l30.358-73.803ZM7.937 165.115 0 39.192 84.69 0 7.937 165.115Z"],["fill","url(#c)","d","M388.676 191.625h30.849L363.31 31.828h-35.758l-56.215 159.797h30.848l13.174-39.356h60.061l13.256 39.356Zm-65.461-62.675 21.602-64.311h1.227l21.602 64.311h-44.431Zm126.831-7.527v70.202h-28.23V71.839h27.002v20.374h1.392c2.782-6.71 7.2-12.028 13.255-15.956 6.056-3.927 13.584-5.89 22.503-5.89 8.264 0 15.465 1.8 21.684 5.318 6.137 3.518 10.964 8.673 14.319 15.382 3.437 6.71 5.074 14.81 4.992 24.383v76.175h-28.23v-71.92c0-8.019-2.046-14.237-6.219-18.819-4.173-4.5-9.819-6.791-17.102-6.791-4.91 0-9.328 1.063-13.174 3.272-3.846 2.128-6.792 5.237-9.001 9.328-2.046 4.009-3.191 8.918-3.191 14.728ZM589.233 239c-10.147 0-18.82-1.391-26.103-4.091-7.282-2.7-13.092-6.382-17.511-10.964-4.418-4.582-7.528-9.655-9.164-15.219l25.448-6.136c1.145 2.372 2.782 4.663 4.991 6.954 2.209 2.291 5.155 4.255 8.837 5.81 3.683 1.554 8.428 2.291 14.074 2.291 8.019 0 14.647-1.964 19.884-5.81 5.237-3.845 7.856-10.227 7.856-19.064v-22.665h-1.391c-1.473 2.946-3.601 5.892-6.383 9.001-2.782 3.109-6.464 5.645-10.965 7.691-4.582 2.046-10.228 3.109-17.101 3.109-9.165 0-17.511-2.209-25.039-6.545-7.446-4.337-13.42-10.883-17.757-19.474-4.418-8.673-6.628-19.473-6.628-32.565 0-13.091 2.21-24.301 6.628-33.383 4.419-9.082 10.311-15.955 17.839-20.7 7.528-4.746 15.874-7.037 25.039-7.037 7.037 0 12.846 1.145 17.347 3.518 4.582 2.373 8.182 5.236 10.883 8.51 2.7 3.272 4.746 6.382 6.137 9.327h1.554v-19.8h27.821v121.749c0 10.228-2.454 18.737-7.364 25.447-4.91 6.709-11.538 11.7-20.048 15.055-8.509 3.355-18.165 4.991-28.884 4.991Zm.245-71.266c5.974 0 11.047-1.473 15.302-4.337 4.173-2.945 7.446-7.118 9.573-12.519 2.21-5.482 3.274-12.027 3.274-19.637 0-7.609-1.064-14.155-3.274-19.8-2.127-5.646-5.318-10.064-9.491-13.255-4.174-3.11-9.329-4.746-15.384-4.746s-11.537 1.636-15.792 4.91c-4.173 3.272-7.365 7.772-9.492 13.418-2.128 5.727-3.191 12.191-3.191 19.392 0 7.2 1.063 13.745 3.273 19.228 2.127 5.482 5.318 9.736 9.573 12.764 4.174 3.027 9.41 4.582 15.629 4.582Zm141.56-26.51V71.839h28.23v119.786h-27.412v-21.273h-1.227c-2.7 6.709-7.119 12.191-13.338 16.446-6.137 4.255-13.747 6.382-22.748 6.382-7.855 0-14.81-1.718-20.783-5.237-5.974-3.518-10.72-8.591-14.075-15.382-3.355-6.709-5.073-14.891-5.073-24.464V71.839h28.312v71.921c0 7.609 2.046 13.664 6.219 18.083 4.173 4.5 9.655 6.709 16.365 6.709 4.173 0 8.183-.982 12.111-3.028 3.927-2.045 7.118-5.072 9.655-9.082 2.537-4.091 3.764-9.164 3.764-15.218Zm65.707-109.395v159.796h-28.23V31.828h28.23Zm44.841 162.169c-7.61 0-14.402-1.391-20.457-4.091-6.055-2.7-10.883-6.791-14.32-12.109-3.518-5.319-5.237-11.946-5.237-19.801 0-6.791 1.228-12.355 3.765-16.773 2.536-4.419 5.891-7.937 10.228-10.637 4.337-2.618 9.164-4.664 14.647-6.055 5.4-1.391 11.046-2.373 16.856-3.027 7.037-.737 12.683-1.391 17.102-1.964 4.337-.573 7.528-1.555 9.574-2.782 1.963-1.309 3.027-3.273 3.027-5.973v-.491c0-5.891-1.718-10.391-5.237-13.664-3.518-3.191-8.51-4.828-15.056-4.828-6.955 0-12.356 1.473-16.447 4.5-4.009 3.028-6.71 6.546-8.183 10.719l-26.348-3.764c2.046-7.282 5.483-13.336 10.31-18.328 4.746-4.909 10.638-8.59 17.511-11.045 6.955-2.455 14.565-3.682 22.912-3.682 5.809 0 11.537.654 17.265 2.045s10.965 3.6 15.711 6.71c4.746 3.109 8.51 7.282 11.455 12.6 2.864 5.318 4.337 11.946 4.337 19.883v80.184h-27.166v-16.446h-.9c-1.719 3.355-4.092 6.464-7.201 9.328-3.109 2.864-6.955 5.237-11.619 6.955-4.828 1.718-10.229 2.536-16.529 2.536Zm7.364-20.701c5.646 0 10.556-1.145 14.729-3.354 4.173-2.291 7.364-5.237 9.655-9.001 2.292-3.763 3.355-7.854 3.355-12.273v-14.155c-.9.737-2.373 1.391-4.5 2.046-2.128.654-4.419 1.145-7.037 1.636-2.619.491-5.155.9-7.692 1.227-2.537.328-4.746.655-6.628.901-4.173.572-8.019 1.472-11.292 2.781-3.355 1.31-5.973 3.11-7.855 5.401-1.964 2.291-2.864 5.318-2.864 8.918 0 5.237 1.882 9.164 5.728 11.782 3.682 2.782 8.51 4.091 14.401 4.091Zm64.643 18.328V71.839h27.412v19.965h1.227c2.21-6.955 5.974-12.274 11.292-16.038 5.319-3.763 11.456-5.645 18.329-5.645 1.555 0 3.355.082 5.237.163 1.964.164 3.601.328 4.91.573v25.938c-1.227-.41-3.109-.819-5.646-1.146a58.814 58.814 0 0 0-7.446-.49c-5.155 0-9.738 1.145-13.829 3.354-4.091 2.209-7.282 5.236-9.655 9.164-2.373 3.927-3.519 8.427-3.519 13.5v70.448h-28.312ZM222.077 39.192l-8.019 125.923L137.387 0l84.69 39.192Zm-53.105 162.825-57.933 33.056-57.934-33.056 11.783-28.556h92.301l11.783 28.556ZM111.039 62.675l30.357 73.803H80.681l30.358-73.803ZM7.937 165.115 0 39.192 84.69 0 7.937 165.115Z"],["id","c","cx","0","cy","0","r","1","gradientTransform","rotate(118.122 171.182 60.81) scale(205.794)","gradientUnits","userSpaceOnUse"],["stop-color","#FF41F8"],["offset",".707","stop-color","#FF41F8","stop-opacity",".5"],["offset","1","stop-color","#FF41F8","stop-opacity","0"],["id","b","x1","0","x2","982","y1","192","y2","192","gradientUnits","userSpaceOnUse"],["stop-color","#F0060B"],["offset","0","stop-color","#F0070C"],["offset",".526","stop-color","#CC26D5"],["offset","1","stop-color","#7702FF"],["id","a"],["fill","#fff","d","M0 0h982v239H0z"],["role","separator","aria-label","Divider",1,"divider"],[1,"right-side"],[1,"pill-group"],[1,"social-links"],["href","https://github.com/angular/angular","aria-label","Github","target","_blank","rel","noopener"],["width","25","height","24","viewBox","0 0 25 24","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Github"],["d","M12.3047 0C5.50634 0 0 5.50942 0 12.3047C0 17.7423 3.52529 22.3535 8.41332 23.9787C9.02856 24.0946 9.25414 23.7142 9.25414 23.3871C9.25414 23.0949 9.24389 22.3207 9.23876 21.2953C5.81601 22.0377 5.09414 19.6444 5.09414 19.6444C4.53427 18.2243 3.72524 17.8449 3.72524 17.8449C2.61064 17.082 3.81137 17.0973 3.81137 17.0973C5.04697 17.1835 5.69604 18.3647 5.69604 18.3647C6.79321 20.2463 8.57636 19.7029 9.27978 19.3881C9.39052 18.5924 9.70736 18.0499 10.0591 17.7423C7.32641 17.4347 4.45429 16.3765 4.45429 11.6618C4.45429 10.3185 4.9311 9.22133 5.72065 8.36C5.58222 8.04931 5.16694 6.79833 5.82831 5.10337C5.82831 5.10337 6.85883 4.77319 9.2121 6.36459C10.1965 6.09082 11.2424 5.95546 12.2883 5.94931C13.3342 5.95546 14.3801 6.09082 15.3644 6.36459C17.7023 4.77319 18.7328 5.10337 18.7328 5.10337C19.3942 6.79833 18.9789 8.04931 18.8559 8.36C19.6403 9.22133 20.1171 10.3185 20.1171 11.6618C20.1171 16.3888 17.2409 17.4296 14.5031 17.7321C14.9338 18.1012 15.3337 18.8559 15.3337 20.0084C15.3337 21.6552 15.3183 22.978 15.3183 23.3779C15.3183 23.7009 15.5336 24.0854 16.1642 23.9623C21.0871 22.3484 24.6094 17.7341 24.6094 12.3047C24.6094 5.50942 19.0999 0 12.3047 0Z"],["href","https://twitter.com/angular","aria-label","Twitter","target","_blank","rel","noopener"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Twitter"],["d","M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"],["href","https://www.youtube.com/channel/UCbn1OgGei-DV7aSRo_HaAiw","aria-label","Youtube","target","_blank","rel","noopener"],["width","29","height","20","viewBox","0 0 29 20","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Youtube"],["fill-rule","evenodd","clip-rule","evenodd","d","M27.4896 1.52422C27.9301 1.96749 28.2463 2.51866 28.4068 3.12258C29.0004 5.35161 29.0004 10 29.0004 10C29.0004 10 29.0004 14.6484 28.4068 16.8774C28.2463 17.4813 27.9301 18.0325 27.4896 18.4758C27.0492 18.9191 26.5 19.2389 25.8972 19.4032C23.6778 20 14.8068 20 14.8068 20C14.8068 20 5.93586 20 3.71651 19.4032C3.11363 19.2389 2.56449 18.9191 2.12405 18.4758C1.68361 18.0325 1.36732 17.4813 1.20683 16.8774C0.613281 14.6484 0.613281 10 0.613281 10C0.613281 10 0.613281 5.35161 1.20683 3.12258C1.36732 2.51866 1.68361 1.96749 2.12405 1.52422C2.56449 1.08095 3.11363 0.76113 3.71651 0.596774C5.93586 0 14.8068 0 14.8068 0C14.8068 0 23.6778 0 25.8972 0.596774C26.5 0.76113 27.0492 1.08095 27.4896 1.52422ZM19.3229 10L11.9036 5.77905V14.221L19.3229 10Z"],["target","_blank","rel","noopener",1,"pill",3,"href"],["xmlns","http://www.w3.org/2000/svg","height","14","viewBox","0 -960 960 960","width","14","fill","currentColor"],["d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"],["class","pill","target","_blank","rel","noopener",3,"href"]],template:function(i,s){i&1&&(ne(0,"main",0)(1,"div",1)(2,"div",2),wn(),ne(3,"svg",3)(4,"g",4),ye(5,"path",5)(6,"path",6),_e(),ne(7,"defs")(8,"radialGradient",7),ye(9,"stop",8)(10,"stop",9)(11,"stop",10),_e(),ne(12,"linearGradient",11),ye(13,"stop",12)(14,"stop",13)(15,"stop",14)(16,"stop",15),_e(),ne(17,"clipPath",16),ye(18,"path",17),_e()()(),lr(),ne(19,"h1"),qi(20),_e(),ne(21,"p"),qi(22,"Congratulations! Your app is running. \u{1F389}"),_e()(),ye(23,"div",18),ne(24,"div",19)(25,"div",20),dd(26,lR,5,2,"a",34,cR),_e(),ne(28,"div",21)(29,"a",22),wn(),ne(30,"svg",23),ye(31,"path",24),_e()(),lr(),ne(32,"a",25),wn(),ne(33,"svg",26),ye(34,"path",27),_e()(),lr(),ne(35,"a",28),wn(),ne(36,"svg",29),ye(37,"path",30),_e()()()()()(),lr(),ye(38,"router-outlet")),i&2&&(Bi(20),gd("Hello, ",s.title,""),Bi(6),fd(md(6,gR,In(1,uR),In(2,hR),In(3,dR),In(4,fR),In(5,pR))))},dependencies:[Ja],styles:[`[_nghost-%COMP%] {
    --bright-blue: oklch(51.01% 0.274 263.83);
    --electric-violet: oklch(53.18% 0.28 296.97);
    --french-violet: oklch(47.66% 0.246 305.88);
    --vivid-pink: oklch(69.02% 0.277 332.77);
    --hot-red: oklch(61.42% 0.238 15.34);
    --orange-red: oklch(63.32% 0.24 31.68);

    --gray-900: oklch(19.37% 0.006 300.98);
    --gray-700: oklch(36.98% 0.014 302.71);
    --gray-400: oklch(70.9% 0.015 304.04);

    --red-to-pink-to-purple-vertical-gradient: linear-gradient(
      180deg,
      var(--orange-red) 0%,
      var(--vivid-pink) 50%,
      var(--electric-violet) 100%
    );

    --red-to-pink-to-purple-horizontal-gradient: linear-gradient(
      90deg,
      var(--orange-red) 0%,
      var(--vivid-pink) 50%,
      var(--electric-violet) 100%
    );

    --pill-accent: var(--bright-blue);

    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1[_ngcontent-%COMP%] {
    font-size: 3.125rem;
    color: var(--gray-900);
    font-weight: 500;
    line-height: 100%;
    letter-spacing: -0.125rem;
    margin: 0;
    font-family: "Inter Tight", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
  }

  p[_ngcontent-%COMP%] {
    margin: 0;
    color: var(--gray-700);
  }

  main[_ngcontent-%COMP%] {
    width: 100%;
    min-height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    box-sizing: inherit;
    position: relative;
  }

  .angular-logo[_ngcontent-%COMP%] {
    max-width: 9.2rem;
  }

  .content[_ngcontent-%COMP%] {
    display: flex;
    justify-content: space-around;
    width: 100%;
    max-width: 700px;
    margin-bottom: 3rem;
  }

  .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {
    margin-top: 1.75rem;
  }

  .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {
    margin-top: 1.5rem;
  }

  .divider[_ngcontent-%COMP%] {
    width: 1px;
    background: var(--red-to-pink-to-purple-vertical-gradient);
    margin-inline: 0.5rem;
  }

  .pill-group[_ngcontent-%COMP%] {
    display: flex;
    flex-direction: column;
    align-items: start;
    flex-wrap: wrap;
    gap: 1.25rem;
  }

  .pill[_ngcontent-%COMP%] {
    display: flex;
    align-items: center;
    --pill-accent: var(--bright-blue);
    background: color-mix(in srgb, var(--pill-accent) 5%, transparent);
    color: var(--pill-accent);
    padding-inline: 0.75rem;
    padding-block: 0.375rem;
    border-radius: 2.75rem;
    border: 0;
    transition: background 0.3s ease;
    font-family: var(--inter-font);
    font-size: 0.875rem;
    font-style: normal;
    font-weight: 500;
    line-height: 1.4rem;
    letter-spacing: -0.00875rem;
    text-decoration: none;
  }

  .pill[_ngcontent-%COMP%]:hover {
    background: color-mix(in srgb, var(--pill-accent) 15%, transparent);
  }

  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 1) {
    --pill-accent: var(--bright-blue);
  }
  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 2) {
    --pill-accent: var(--french-violet);
  }
  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 5) {
    --pill-accent: var(--hot-red);
  }

  .pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {
    margin-inline-start: 0.25rem;
  }

  .social-links[_ngcontent-%COMP%] {
    display: flex;
    align-items: center;
    gap: 0.73rem;
    margin-top: 1.5rem;
  }

  .social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {
    transition: fill 0.3s ease;
    fill: var(--gray-400);
  }

  .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {
    fill: var(--gray-900);
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: max-content;
    }

    .divider[_ngcontent-%COMP%] {
      height: 1px;
      width: 100%;
      background: var(--red-to-pink-to-purple-horizontal-gradient);
      margin-block: 1.5rem;
    }
  }`]});let t=e;return t})();kd(X_,J_).catch(t=>console.error(t));
