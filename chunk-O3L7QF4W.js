import{$ as jt,G as N,H as Tt,I as X,J as At,K as kt,L as Y,M as It,N as Vt,O as Ot,P as Z,Q as $,R as Lt,S as tt,T as et,U as Nt,V as Bt,W as it,X as nt,Y as Wt,Z as B,_ as qt,aa as Ht,ba as Ft,ca as W,da as ot,e as K,ea as b,fa as at,ga as rt,h as gt,ha as lt,i as G,ia as dt,ja as mt,k as U,ka as ct,la as st,ma as pt,na as ut,o as J,oa as _t,pa as Qt,q as Et,t as Rt}from"./chunk-TERM5FHH.js";import"./chunk-PVH7Q34H.js";import{Fb as r,Gb as a,Hb as D,I as F,Ib as w,Jb as S,Lb as M,N as Q,Ob as f,Qb as s,Rc as Pt,Sc as L,Ub as A,Uc as Dt,Vb as k,Vc as vt,Wb as I,Wc as bt,Xb as ft,Yb as d,Zb as R,_b as P,ab as m,ac as g,bb as y,bc as C,cc as x,ic as V,ja as T,jc as O,ka as wt,kc as z,ma as p,na as u,s as E,tb as h,ua as St,vb as _,xb as Mt,z as H}from"./chunk-WVJGIKHI.js";import{a as j,f as yt}from"./chunk-CQCHLVVT.js";function ie(i,l){if(i&1){let o=M();w(0),r(1,"div",6)(2,"div",7)(3,"mat-form-field",8)(4,"mat-label"),d(5,"Name"),a(),r(6,"input",9),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.productName,t)||(n.model.productName=t),u(t)}),a()()(),r(7,"div",7)(8,"mat-form-field",8)(9,"mat-label"),d(10,"Quantity"),a(),r(11,"input",10),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.quantity,t)||(n.model.quantity=t),u(t)}),a()()(),r(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),d(15,"Cost Rate"),a(),r(16,"input",11),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.costRate,t)||(n.model.costRate=t),u(t)}),a()()(),r(17,"div",7)(18,"mat-form-field",8)(19,"mat-label"),d(20,"Sell Rate"),a(),r(21,"input",12),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.sellRate,t)||(n.model.sellRate=t),u(t)}),a()()(),r(22,"div",13)(23,"mat-form-field",8)(24,"mat-label"),d(25,"Remarks"),a(),r(26,"input",14),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.remarks,t)||(n.model.remarks=t),u(t)}),a()()()(),S()}if(i&2){let o=s();m(6),g("ngModel",o.model.productName),m(5),g("ngModel",o.model.quantity),m(5),g("ngModel",o.model.costRate),m(5),g("ngModel",o.model.sellRate),m(5),g("ngModel",o.model.remarks)}}function ne(i,l){if(i&1){let o=M();w(0),r(1,"div",29)(2,"div",30)(3,"app-autocomplete",31),f("mhModelChange",function(t){let n=p(o),c=n.$implicit,v=n.index,q=s(2);return u(q.productChange(t,c,v))}),x("mhModelChange",function(t){let c=p(o).$implicit;return C(c.productName,t)||(c.productName=t),u(t)}),a()(),r(4,"div",30)(5,"mat-form-field",8)(6,"mat-label"),d(7,"Quantity"),a(),r(8,"input",32),f("focusout",function(){let n=p(o).$implicit,c=s(2);return u(c.calQty(n))}),x("ngModelChange",function(t){let c=p(o).$implicit;return C(c.quantity,t)||(c.quantity=t),u(t)}),a()()(),r(9,"div",30)(10,"mat-form-field",8)(11,"mat-label"),d(12,"Rate"),a(),r(13,"input",33),f("keyup",function(){p(o);let t=s(2);return u(t.calculation())}),x("ngModelChange",function(t){let c=p(o).$implicit;return C(c.price,t)||(c.price=t),u(t)}),a()()(),r(14,"div",30)(15,"mat-form-field",8)(16,"mat-label"),d(17,"Amount"),a(),r(18,"input",34),x("ngModelChange",function(t){let c=p(o).$implicit;return C(c.amount,t)||(c.amount=t),u(t)}),a()()()(),S()}if(i&2){let o=l.$implicit,e=s(2);m(3),_("options",e.ProductConfig)("dataSource",e.productList),g("mhModel",o.productName),m(5),g("ngModel",o.quantity),m(5),g("ngModel",o.price),m(5),g("ngModel",o.amount)}}function oe(i,l){if(i&1){let o=M();r(0,"p",35),f("click",function(){p(o);let t=s(2);return u(t.DeleteOrderDetail())}),d(1,"Remove Last Row"),a()}}function ae(i,l){if(i&1){let o=M();r(0,"div",6)(1,"div",15)(2,"mat-form-field",8)(3,"mat-label"),d(4,"Order Name"),a(),r(5,"input",16),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.orderName,t)||(n.model.orderName=t),u(t)}),a()()(),r(6,"div",15)(7,"mat-form-field",8)(8,"mat-label"),d(9,"Order Date"),a(),r(10,"input",17),x("ngModelChange",function(t){p(o);let n=s();return C(n.orderDate,t)||(n.orderDate=t),u(t)}),a(),D(11,"mat-datepicker-toggle",18)(12,"mat-datepicker",null,19),a()(),r(14,"div",15)(15,"mat-form-field",8)(16,"mat-label"),d(17,"Discount Amount"),a(),r(18,"input",20),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.discountAmount,t)||(n.model.discountAmount=t),u(t)}),a()()(),r(19,"div",13)(20,"mat-checkbox",21),x("ngModelChange",function(t){p(o);let n=s();return C(n.model.isPaid,t)||(n.model.isPaid=t),u(t)}),d(21,"Paid"),a()(),r(22,"div",13)(23,"h2",22),d(24,"Order Details"),a()(),r(25,"div",13),h(26,ne,19,6,"ng-container",23),a(),r(27,"div",24)(28,"div",25)(29,"p",26),f("click",function(){p(o);let t=s();return u(t.AddOrderDetail())}),d(30,"Add Row"),a(),h(31,oe,2,0,"p",27),a(),r(32,"div")(33,"p",28),d(34),V(35,"number"),a(),r(36,"p",28),d(37),V(38,"number"),a(),r(39,"p",28),d(40),V(41,"number"),a()()()()}if(i&2){let o=ft(13),e=s();m(5),g("ngModel",e.model.orderName),m(5),_("matDatepicker",o),g("ngModel",e.orderDate),m(),_("for",o),m(7),g("ngModel",e.model.discountAmount),m(2),g("ngModel",e.model.isPaid),m(6),_("ngForOf",e.orderDetail),m(5),_("ngIf",e.orderDetail&&e.orderDetail.length>1),m(3),P("Total Amount: ",e.model.totalAmount?O(35,11,e.model.totalAmount):0,""),m(3),P("Discount Amount: ",e.model.discountAmount?O(38,13,e.model.discountAmount):0,""),m(3),P("Bill Amount: ",O(41,15,e.billedAmount),"")}}var ht=(()=>{let l=class l{constructor(e,t,n,c){this.dialogRef=e,this.data=t,this._snackBar=n,this._dashboard=c,this.Title="",this.model={},this.loader=!1,this.orderDate=new Date,this.orderDetail=[],this.productList=[],this.ProductConfig=new Bt,this.Title=t.title}get isProduct(){return this.data&&this.data.isProduct}close(e){this.dialogRef.close(e)}calQty(e){e.quantity||(e.quantity=1),this.calculation()}get billedAmount(){let e=this.model.totalAmount||0;return this.model.totalAmount>0&&this.model.discountAmount>0&&(e=this.model.totalAmount-this.model.discountAmount),e}calculation(){this.model.totalAmount=0,this.orderDetail.forEach(e=>{e.quantity>0&&e.price>0&&(e.amount=e.quantity*e.price,this.model.totalAmount+=e.amount)})}AddOrderDetail(){(!this.orderDetail||this.orderDetail.length<1)&&(this.orderDetail=[]),this.orderDetail.push(new Ct)}DeleteOrderDetail(){this.orderDetail.length>0&&this.orderDetail.pop(),this.calculation()}openSnackBar(e,t="OK"){this._snackBar.open(e,t)}EditData(){let e=this.data.editData;this.isProduct&&(this.model.productName=e.productName||"",this.model.quantity=e.quantity||0,this.model.costRate=e.costRate||0,this.model.sellRate=e.sellRate||0,this.model.remarks=e.remarks||"")}save(){this.isProduct&&this.SaveProduct()}SaveProduct(e){if(!this.model.productName)return this.openSnackBar("Product Name is Required");if(!this.model.quantity||this.model.quantity<0)return this.openSnackBar("Quantity is Required");if(!this.model.costRate||this.model.costRate<0)return this.openSnackBar("Cost Rate is Required");if(!this.model.sellRate||this.model.sellRate<0)return this.openSnackBar("Sell Rate is Required");let t={productName:this.model.productName,quantity:this.model.quantity,costRate:this.model.costRate,sellRate:this.model.sellRate,remarks:this.model.remarks||""};this.loader=!0,this.data&&this.data.editData&&this.data.editData.id?this._dashboard.update(this.data.editData.id,t).then(()=>{this.openSnackBar("Successfully Updated"),this.loader=!1,this.close(!0)}).catch(n=>{this.loader=!1,this.close(!0),this.openSnackBar(n)}):this._dashboard.create(t).then(()=>{this.openSnackBar("Successfully Saved"),this.loader=!1,this.close(!0)})}productChange(e,t,n){if(!e){t.price=0;return}let c=e,v=this.productList.find(q=>q.productName==c);v&&v.productName&&(t.price=v.sellRate),this.calculation()}GetProductData(){this._dashboard.getAll().snapshotChanges().pipe(E(e=>e.map(t=>j({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(e=>{this.productList=e})}initConfig(){this.ProductConfig.DisplayField="productName",this.ProductConfig.ValueField="productName",this.ProductConfig.Key="",this.ProductConfig.Label="Product Name",this.ProductConfig.helpText="Type letter to Search",this.ProductConfig.searchType="local",this.ProductConfig.onChange=e=>{console.log({event:e})}}ngOnInit(){return yt(this,null,function*(){this.initConfig(),this.isProduct||(yield this.GetProductData(),this.AddOrderDetail()),this.data.editData&&this.EditData()})}};l.\u0275fac=function(t){return new(t||l)(y(At),y(kt,8),y(B),y(N))},l.\u0275cmp=T({type:l,selectors:[["app-add-product"]],decls:14,vars:6,consts:[[1,"header","p-3"],["mat-dialog-close","","mat-icon-button",""],[4,"ngIf","ngIfElse"],["orderRef",""],[1,"d-flex","justify-content-end","w-100","px-3"],["mat-flat-button","",3,"disabled","click"],[1,"row"],[1,"col-md-6"],[1,"w-100"],["required","","type","test","matInput","","placeholder","Product Name",3,"ngModel","ngModelChange"],["required","","type","number","matInput","","placeholder","Quantity",3,"ngModel","ngModelChange"],["required","","type","number","matInput","","placeholder","Cost Rate",3,"ngModel","ngModelChange"],["required","","type","number","matInput","","placeholder","Sell Rate",3,"ngModel","ngModelChange"],[1,"col-md-12"],["type","test","matInput","","placeholder","Remarks",3,"ngModel","ngModelChange"],[1,"col-md-4"],["type","test","matInput","","placeholder","Order Name",3,"ngModel","ngModelChange"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["type","number","matInput","","placeholder","Discount Amount",3,"ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"mb-0","mt-2"],[4,"ngFor","ngForOf"],[1,"col-md-12","mt-3","d-flex","justify-content-between","footerP"],[1,"d-flex","align-items-center","addRow"],[1,"me-3",3,"click"],[3,"click",4,"ngIf"],[1,"mb-1"],[1,"row","mx-0","px-0","col-md-12","detailRow"],[1,"col-md-3"],[3,"options","dataSource","mhModel","mhModelChange"],["type","number","matInput","","placeholder","Quantity",3,"ngModel","focusout","ngModelChange"],["type","number","disabled","","matInput","","placeholder","Rate",3,"ngModel","keyup","ngModelChange"],["type","number","disabled","","matInput","","placeholder","Amount",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,n){if(t&1&&(r(0,"div",0)(1,"h1"),d(2),a(),r(3,"button",1)(4,"mat-icon"),d(5,"close"),a()()(),r(6,"mat-dialog-content"),h(7,ie,27,5,"ng-container",2)(8,ae,42,17,"ng-template",null,3,z),a(),r(10,"mat-dialog-actions")(11,"div",4)(12,"button",5),f("click",function(){return n.save()}),d(13,"Save"),a()()()),t&2){let c=ft(9);m(2),R(n.Title),m(5),_("ngIf",n.isProduct)("ngIfElse",c),m(5),Mt("spinner",n.loader),_("disabled",n.loader)}},dependencies:[Pt,L,qt,it,Wt,et,tt,$,Lt,jt,Ht,Ft,W,It,Ot,Vt,Nt,G,Et,U,Rt,J,vt],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0!important;font-weight:500}.mdc-button[_ngcontent-%COMP%]:not([disabled]){background:#696969!important;color:#fff!important}.detailRow[_ngcontent-%COMP%]{margin-bottom:5px;padding-top:2px;border:1px solid #d8d8d8}.footerP[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.footerP[_ngcontent-%COMP%]   .addRow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]});let i=l;return i})(),Ct=class{constructor(){this.quantity=1,this.price=0,this.amount=0}};var ce=["inputSearch"];function se(i,l){i&1&&D(0,"th",24)}function pe(i,l){if(i&1){let o=M();r(0,"mat-icon",28),f("click",function(){p(o);let t=s().$implicit,n=s();return u(n.AddProduct(t))}),d(1,"edit"),a()}}function ue(i,l){if(i&1){let o=M();r(0,"mat-icon",29),f("click",function(){p(o);let t=s().$implicit,n=s();return u(n.DeleteProduct(t))}),d(1,"delete"),a()}}function _e(i,l){if(i&1&&(r(0,"td",25),h(1,pe,2,0,"mat-icon",26)(2,ue,2,0,"mat-icon",27),a()),i&2){let o=s();m(),_("ngIf",o.isAdmin),m(),_("ngIf",o.isAdmin)}}function he(i,l){i&1&&(r(0,"th",24),d(1," Name "),a())}function fe(i,l){if(i&1&&(r(0,"td",30),d(1),a()),i&2){let o=l.$implicit;m(),P(" ",o.productName," ")}}function ge(i,l){i&1&&(r(0,"th",24),d(1," Quantity "),a())}function Ce(i,l){if(i&1&&(r(0,"td",30),d(1),a()),i&2){let o=l.$implicit;m(),P(" ",o.quantity," ")}}function xe(i,l){i&1&&(r(0,"th",24),d(1," Cost Rate "),a())}function ye(i,l){if(i&1&&(r(0,"td",30),d(1),a()),i&2){let o=l.$implicit;m(),P(" ",o.costRate," ")}}function we(i,l){i&1&&(r(0,"th",24),d(1," Sell Rate "),a())}function Se(i,l){if(i&1&&(r(0,"td",30),d(1),a()),i&2){let o=l.$implicit;m(),P(" ",o.sellRate," ")}}function Me(i,l){i&1&&D(0,"tr",31)}function Pe(i,l){i&1&&D(0,"tr",32)}function De(i,l){if(i&1){let o=M();r(0,"div",33)(1,"mat-paginator",34,35),f("page",function(t){p(o);let n=s();return u(n.PageChange(t))}),a()()}if(i&2){let o=s();m(),_("length",o.length)("pageSize",o.pageSize)}}function ve(i,l){if(i&1&&(w(0),r(1,"div",43),d(2,"Name"),a(),r(3,"div",44),d(4),a(),r(5,"div",43),d(6,"Relation"),a(),r(7,"div",44),d(8),a(),S()),i&2){let o=s(2);m(4),R(o.viewRowData.name),m(4),R(o.viewRowData.relation)}}function be(i,l){if(i&1){let o=M();r(0,"div",45)(1,"mat-form-field",46)(2,"mat-label"),d(3,"Name"),a(),r(4,"input",47),x("ngModelChange",function(t){p(o);let n=s(2);return C(n.editRowName,t)||(n.editRowName=t),u(t)}),a()()()}if(i&2){let o=s(2);m(4),g("ngModel",o.editRowName)}}function Ee(i,l){if(i&1){let o=M();r(0,"button",48),f("click",function(){p(o);let t=s(2);return u(t.edit())}),d(1,"Edit"),a()}}function Re(i,l){if(i&1){let o=M();r(0,"div",36)(1,"h2",37),d(2),a(),h(3,ve,9,2,"ng-container",38)(4,be,5,1,"div",39),r(5,"div",40)(6,"button",41),f("click",function(){p(o);let t=s();return u(t.closeDialog())}),d(7),a(),h(8,Ee,2,0,"button",42),a()()}if(i&2){let o=s();m(2),R(o.title),m(),_("ngIf",o.tab==1),m(),_("ngIf",o.tab==2),m(3),R(o.tab==1?"OK":"Close"),m(),_("ngIf",o.tab==2)}}var Yt=(()=>{let l=class l{constructor(e,t,n,c){this.router=e,this._dashboard=t,this.matDialog=n,this._snackBar=c,this.productList=[],this.title="",this.isAdmin=!1,this.forLocalSearch=[],this.displayedColumns=["more","name","quantity","costRate","sellRate"],this.pageSize=10,this.length=0;let v=this._dashboard.getLocalStorage("login");if(v){let q=JSON.parse(v);this.isAdmin=q.role==Tt.Admin}}AddProduct(e){let t=new X;t.width="600px",t.data={title:e?"Edit Product":"Add Product",isProduct:!0,editData:Object.assign({},e)},this.matDialog.open(ht,t).afterClosed().subscribe(c=>{})}openSnackBar(e,t="\xD6K"){this._snackBar.open(e,t)}getFamilyData(){this.productList=this._dashboard.getFamily(),this.forLocalSearch=[...this.productList],this.length=this.productList.length,this.pagination(1)}deleteData(e){this._dashboard.deleteFamilyData(e,this.productList),this.productList=[...this.productList]}openModel(e,t,n,c,v){this.title=c,this.tab=v,this.viewRowData=t,this.editRowName=t.name,this.editRowIndex=n,this.dialogOpen(e)}edit(){if(!this.editRowName)return this.openSnackBar("Name is Required","OK");this.productList[this.editRowIndex].name=this.editRowName,this.closeDialog()}dialogOpen(e){this.dialogRef=e,this.matDialog.open(this.dialogRef)}closeDialog(){this.matDialog.closeAll()}localSearch(e,t,n){this.productList=Z.SearchBySpecificKeyInData(e,t,n),t||(this.productList=[...this.forLocalSearch])}PageChange(e){this.pagination(e.pageIndex+1)}pagination(e){let t=0;e>0&&(t=e*this.pageSize),this.productList=[...this.forLocalSearch.slice(t-this.pageSize,t)]}DeleteProduct(e){e.id&&this._dashboard.delete(e.id).then(()=>{this.GetProductData(),this.openSnackBar("The Product was deleted successfully!","OK")}).catch(t=>this.openSnackBar(t,"OK"))}GetProductData(){this.productList=[],this._dashboard.getAll().snapshotChanges().pipe(E(e=>e.map(t=>j({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(e=>{this.productList=e,this.forLocalSearch=[...this.productList],this.length=this.productList.length,this.pagination(1)})}ngOnInit(){this.GetProductData()}ngAfterViewInit(){H(this.inputSearch.nativeElement,"keyup").pipe(E(e=>e.target.value),F(400),Q()).subscribe(e=>{this.localSearch("productName",e,this.forLocalSearch)})}};l.\u0275fac=function(t){return new(t||l)(y(K),y(N),y(Y),y(B))},l.\u0275cmp=T({type:l,selectors:[["app-product"]],viewQuery:function(t,n){if(t&1&&(A(ce,5),A(b,5)),t&2){let c;k(c=I())&&(n.inputSearch=c.first),k(c=I())&&(n.paginator=c.first)}},decls:35,vars:5,consts:[[1,"w-100"],[1,"d-flex","justify-content-between","align-items-center","searchMargin"],[1,"100"],[1,"d-flex","align-items-center"],[1,"heading"],["mat-mini-fab","","matTooltip","Add product",1,"ms-2",2,"background","dimgray",3,"click"],[1,"input-group","justify-content-end"],[1,"form-outline"],["mat-input","","type","search","placeholder","Type letter for Search",1,"form-control"],["inputSearch",""],[1,"mat-elevation-z8","ov-auto"],["mat-table","",1,"width-min-100","w-max-content",3,"dataSource"],["matColumnDef","more"],["mat-header-cell","",4,"matHeaderCellDef"],["class","td-more","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","quantity"],["matColumnDef","costRate"],["matColumnDef","sellRate"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mt-2",4,"ngIf"],["modelDialog",""],["mat-header-cell",""],["mat-cell","",1,"td-more"],["class","me-3 cursor-pointer",3,"click",4,"ngIf"],["class","cursor-pointer text-danger",3,"click",4,"ngIf"],[1,"me-3","cursor-pointer",3,"click"],[1,"cursor-pointer","text-danger",3,"click"],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mt-2"],[3,"length","pageSize","page"],["MatPaginator",""],[1,"row"],[1,"paddingHeading","col-12"],[4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","text-right"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary","class","ms-2",3,"click",4,"ngIf"],[1,"col-3"],[1,"col-9"],[1,"col-12"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"ms-2",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Products"),a(),r(6,"button",5),f("click",function(){return n.AddProduct()}),r(7,"mat-icon"),d(8,"add"),a()()()(),r(9,"div",6)(10,"div",7),D(11,"input",8,9),a()()(),r(13,"div",10)(14,"table",11),w(15,12),h(16,se,1,0,"th",13)(17,_e,3,2,"td",14),S(),w(18,15),h(19,he,2,0,"th",13)(20,fe,2,1,"td",16),S(),w(21,17),h(22,ge,2,0,"th",13)(23,Ce,2,1,"td",16),S(),w(24,18),h(25,xe,2,0,"th",13)(26,ye,2,1,"td",16),S(),w(27,19),h(28,we,2,0,"th",13)(29,Se,2,1,"td",16),S(),h(30,Me,1,0,"tr",20)(31,Pe,1,0,"tr",21),a()(),h(32,De,3,2,"div",22),a(),h(33,Re,9,5,"ng-template",null,23,z)),t&2&&(m(14),_("dataSource",n.productList),m(16),_("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),m(),_("matRowDefColumns",n.displayedColumns),m(),_("ngIf",n.productList&&n.productList.length>0))},dependencies:[L,it,nt,et,tt,$,W,ot,at,lt,st,dt,rt,pt,mt,ct,ut,_t,b,G,U,J],styles:[".paddingHeading[_ngcontent-%COMP%]{padding:0 15px}.searchMargin[_ngcontent-%COMP%]{margin:10px 0}"]});let i=l;return i})();var Te=["inputSearch"];function Ae(i,l){i&1&&D(0,"th",22)}function ke(i,l){i&1&&(r(0,"td",23)(1,"mat-icon"),d(2,"more_vert"),a()())}function Ie(i,l){i&1&&(r(0,"th",22),d(1," Name "),a())}function Ve(i,l){if(i&1&&(r(0,"td",24),d(1),a()),i&2){let o=l.$implicit;m(),P(" ",o.name," ")}}function Oe(i,l){i&1&&(r(0,"th",22),d(1," Order Date "),a())}function Le(i,l){if(i&1&&(r(0,"td",24),d(1),V(2,"date"),a()),i&2){let o=l.$implicit;m(),P(" ",o.orderDate?O(2,1,o.orderDate):""," ")}}function Ne(i,l){i&1&&(r(0,"th",22),d(1," Total Amount "),a())}function Be(i,l){if(i&1&&(r(0,"td",24),d(1),a()),i&2){let o=l.$implicit;m(),P(" ",o.totalAmount," ")}}function We(i,l){i&1&&D(0,"tr",25)}function qe(i,l){i&1&&D(0,"tr",26)}function je(i,l){if(i&1){let o=M();r(0,"div",27)(1,"mat-paginator",28,29),f("page",function(t){p(o);let n=s();return u(n.PageChange(t))}),a()()}if(i&2){let o=s();m(),_("length",o.length)("pageSize",o.pageSize)}}var Zt=(()=>{let l=class l{constructor(e,t,n,c){this.router=e,this._dashboard=t,this.matDialog=n,this._snackBar=c,this.orderList=[],this.title="",this.forLocalSearch=[],this.displayedColumns=["more","name","orderDate","totalAmount"],this.pageSize=10,this.length=0}AddOrder(){let e=new X;e.width="1100px",e.data={title:"Add Order"},this.matDialog.open(ht,e).afterClosed().subscribe(n=>{})}openSnackBar(e,t){this._snackBar.open(e,t)}getFamilyData(){this.orderList=this._dashboard.getFamily(),this.forLocalSearch=[...this.orderList],this.length=this.orderList.length,this.pagination(1)}localSearch(e,t,n){this.orderList=Z.SearchBySpecificKeyInData(e,t,n),t||(this.orderList=[...this.forLocalSearch])}PageChange(e){this.pagination(e.pageIndex+1)}pagination(e){let t=0;e>0&&(t=e*this.pageSize),this.orderList=[...this.forLocalSearch.slice(t-this.pageSize,t)]}ngOnInit(){this.getFamilyData()}ngAfterViewInit(){H(this.inputSearch.nativeElement,"keyup").pipe(E(e=>e.target.value),F(400),Q()).subscribe(e=>{this.localSearch("name",e,this.forLocalSearch)})}};l.\u0275fac=function(t){return new(t||l)(y(K),y(N),y(Y),y(B))},l.\u0275cmp=T({type:l,selectors:[["app-order"]],viewQuery:function(t,n){if(t&1&&(A(Te,5),A(b,5)),t&2){let c;k(c=I())&&(n.inputSearch=c.first),k(c=I())&&(n.paginator=c.first)}},decls:30,vars:5,consts:[[1,"w-100"],[1,"d-flex","justify-content-between","align-items-center","searchMargin"],[1,"100"],[1,"d-flex","align-items-center"],[1,"heading"],["mat-mini-fab","","matTooltip","Add Order",1,"ms-2",2,"background","dimgray",3,"click"],[1,"input-group","justify-content-end"],[1,"form-outline"],["mat-input","","type","search","placeholder","Type letter for Search",1,"form-control"],["inputSearch",""],[1,"mat-elevation-z8","ov-auto"],["mat-table","",1,"width-min-100","w-max-content",3,"dataSource"],["matColumnDef","more"],["mat-header-cell","",4,"matHeaderCellDef"],["class","td-more","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","orderDate"],["matColumnDef","totalAmount"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mt-2",4,"ngIf"],["mat-header-cell",""],["mat-cell","",1,"td-more"],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mt-2"],[3,"length","pageSize","page"],["MatPaginator",""]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Orders"),a(),r(6,"button",5),f("click",function(){return n.AddOrder()}),r(7,"mat-icon"),d(8,"add"),a()()()(),r(9,"div",6)(10,"div",7),D(11,"input",8,9),a()()(),r(13,"div",10)(14,"table",11),w(15,12),h(16,Ae,1,0,"th",13)(17,ke,3,0,"td",14),S(),w(18,15),h(19,Ie,2,0,"th",13)(20,Ve,2,1,"td",16),S(),w(21,17),h(22,Oe,2,0,"th",13)(23,Le,3,3,"td",16),S(),w(24,18),h(25,Ne,2,0,"th",13)(26,Be,2,1,"td",16),S(),h(27,We,1,0,"tr",19)(28,qe,1,0,"tr",20),a()(),h(29,je,3,2,"div",21),a()),t&2&&(m(14),_("dataSource",n.orderList),m(13),_("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),m(),_("matRowDefColumns",n.displayedColumns),m(),_("ngIf",n.orderList&&n.orderList.length>0))},dependencies:[L,nt,W,ot,at,lt,st,dt,rt,pt,mt,ct,ut,_t,b,Dt],styles:[".paddingHeading[_ngcontent-%COMP%]{padding:0 15px}.searchMargin[_ngcontent-%COMP%]{margin:10px 0}"]});let i=l;return i})();var He=[{path:"",redirectTo:"/dashboard/products",pathMatch:"full"},{path:"products",component:Yt},{path:"orders",component:Zt}],yi=(()=>{let l=class l{};l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=wt({type:l}),l.\u0275inj=St({imports:[bt,Qt,gt.forChild(He),gt]});let i=l;return i})();export{yi as DashboardModule};
